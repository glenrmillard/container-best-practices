<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="A guide for creating and managing container-based applications.">
<title>Container Best Practices</title>
<link rel="stylesheet" href="http://www.projectatomic.io/stylesheets/application.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Container Best Practices</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_audience">1. Audience</a></li>
<li><a href="#Overview">2. Overview</a></li>
<li><a href="#Goals">3. Goals</a>
<ul class="sectlevel2">
<li><a href="#_provide_general_guidance_on_containerizing_applications">3.1. Provide general guidance on containerizing applications</a></li>
<li><a href="#_provide_a_deep_dive_into_specific_challenges_related_to_container_technology">3.2. Provide a deep-dive into specific challenges related to container technology</a></li>
<li><a href="#_describe_a_complete_end_to_end_journey_of_a_containerized_application_including_the_technology_tools_and_best_practices">3.3. Describe a complete end-to-end journey of a containerized application, including the technology, tools and best practices</a></li>
</ul>
</li>
<li><a href="#plan">4. Application Planning</a>
<ul class="sectlevel2">
<li><a href="#_persistent_storage_simple_database_server">4.1. Persistent Storage: Simple Database Server</a>
<ul class="sectlevel3">
<li><a href="#_traditional_database_server">4.1.1. Traditional database server</a></li>
<li><a href="#_containerized_environment">4.1.2. Containerized Environment</a></li>
</ul>
</li>
<li><a href="#_container_interconnection_database_server_with_local_and_distributed_clients">4.2. Container Interconnection: Database Server with Local and Distributed Clients</a>
<ul class="sectlevel3">
<li><a href="#_traditional_database_server_environment">4.2.1. Traditional Database server/environment</a></li>
<li><a href="#_container_environment_docker">4.2.2. Container environment - Docker</a></li>
</ul>
</li>
<li><a href="#_data_initialization">4.3. Data Initialization</a>
<ul class="sectlevel3">
<li><a href="#_examples">4.3.1. Examples</a></li>
<li><a href="#_key_issues">4.3.2. Key Issues</a></li>
<li><a href="#_general_approaches_and_patterns_containers">4.3.3. General Approaches and Patterns - Containers</a></li>
<li><a href="#_persistent_storage_in_docker">4.3.4. Persistent Storage in Docker</a></li>
<li><a href="#_framework_support">4.3.5. Framework Support</a>
<ul class="sectlevel4">
<li><a href="#_explicit_initialization_atomic_cli">Explicit Initialization - Atomic CLI</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_security_and_user_requirements">4.4. Security and user requirements</a></li>
<li><a href="#_host_and_image_synchronization">4.5. Host and image synchronization</a>
<ul class="sectlevel3">
<li><a href="#_time">4.5.1. Time</a></li>
<li><a href="#_machine_id">4.5.2. Machine ID</a></li>
</ul>
</li>
<li><a href="#_considerations_for_images_on_atomic_host_and_openshift">4.6. Considerations for images on Atomic Host and OpenShift</a></li>
<li><a href="#_where_to_store_related_components">4.7. Where to store related components</a>
<ul class="sectlevel3">
<li><a href="#_scripts">4.7.1. scripts</a></li>
<li><a href="#_tar_files">4.7.2. tar files</a></li>
<li><a href="#_help_files">4.7.3. help files</a></li>
<li><a href="#_dockerfiles">4.7.4. Dockerfiles</a></li>
</ul>
</li>
<li><a href="#planning_starting_application">4.8. Starting your applications within a container</a>
<ul class="sectlevel3">
<li><a href="#_calling_the_binary_directly">4.8.1. Calling the binary directly</a></li>
<li><a href="#_using_a_script">4.8.2. Using a script</a></li>
<li><a href="#planning_use_systemd">4.8.3. Use systemd</a></li>
</ul>
</li>
<li><a href="#_techniques_for_deploying_or_starting_images_from_a_host">4.9. Techniques for deploying or starting images from a host</a>
<ul class="sectlevel3">
<li><a href="#_host_systemd_considerations">4.9.1. host systemd considerations</a></li>
<li><a href="#_native_docker_ah_unit_file">4.9.2. native docker (ah) unit file</a>
<ul class="sectlevel4">
<li><a href="#_example_unit_file_atomic_create_unit_file">example unit file - atomic create unit file</a></li>
</ul>
</li>
<li><a href="#_openshift_driven">4.9.3. openshift driven</a></li>
</ul>
</li>
<li><a href="#planning_network">4.10. Network Considerations</a>
<ul class="sectlevel3">
<li><a href="#_single_host">4.10.1. single host</a></li>
<li><a href="#_multi_host">4.10.2. multi-host</a></li>
<li><a href="#_aep_ose_docker_considerations">4.10.3. AEP / OSE / Docker considerations</a></li>
</ul>
</li>
<li><a href="#planning_storage">4.11. Storage Considerations</a>
<ul class="sectlevel3">
<li><a href="#_persistent_storage_for_containers_data_volumes">4.11.1. Persistent storage for containers: Data Volumes</a>
<ul class="sectlevel4">
<li><a href="#_using_data_volumes_in_a_dockerfile">Using data volumes in a Dockerfile</a></li>
</ul>
</li>
<li><a href="#_persistent_storage_for_containers_mounting_a_directory_from_the_host">4.11.2. Persistent storage for containers: Mounting a directory from the host</a></li>
<li><a href="#_openshift_persistent_storage">4.11.3. OpenShift persistent storage</a></li>
<li><a href="#_storage_backends_for_persistent_storage">4.11.4. Storage backends for persistent storage</a></li>
</ul>
</li>
<li><a href="#_logging">4.12. Logging</a>
<ul class="sectlevel3">
<li><a href="#logging_use_service">4.12.1. Using a logging service</a></li>
<li><a href="#_setting_the_log_driver_for_docker_daemon">4.12.2. Setting the log driver for docker daemon</a></li>
<li><a href="#logging_host_shared_storage">4.12.3. Using shared storage with the host</a></li>
</ul>
</li>
<li><a href="#_security_and_user_considerations">4.13. Security and User considerations</a>
<ul class="sectlevel3">
<li><a href="#_passing_credentials_and_secrets">4.13.1. Passing credentials and secrets</a>
<ul class="sectlevel4">
<li><a href="#_handling_secrets_in_kubernetes">Handling Secrets in Kubernetes</a></li>
<li><a href="#_other_projects_facilitating_secret_management">Other Projects Facilitating Secret Management</a></li>
</ul>
</li>
<li><a href="#_user_namespace_mapping_docker_1_10_feature">4.13.2. User NameSpace Mapping (docker-1.10 feature)</a></li>
<li><a href="#__a_href_https_www_openshift_com_promotions_docker_security_html_class_bare_https_www_openshift_com_promotions_docker_security_html_a">4.13.3. <a href="https://www.openshift.com/promotions/docker-security.html" class="bare">https://www.openshift.com/promotions/docker-security.html</a></a></li>
</ul>
</li>
<li><a href="#_preventing_your_image_users_from_filling_the_filesystem">4.14. Preventing your image users from filling the filesystem</a>
<ul class="sectlevel3">
<li><a href="#_ask_for_a_larger_storage_space_on_run">4.14.1. Ask for a larger storage space on run</a></li>
<li><a href="#_space_considerations_for_logging">4.14.2. Space considerations for logging</a></li>
</ul>
</li>
<li><a href="#_image_naming">4.15. Image naming</a></li>
<li><a href="#_deployment_considerations">4.16. Deployment Considerations</a>
<ul class="sectlevel3">
<li><a href="#_platform">4.16.1. Platform</a></li>
<li><a href="#_lifecycle">4.16.2. Lifecycle</a></li>
<li><a href="#_maintenance">4.16.3. Maintenance</a></li>
<li><a href="#_build_infrastructure">4.16.4. Build infrastructure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#create">5. Creating Images</a>
<ul class="sectlevel2">
<li><a href="#_creating_base_images">5.1. Creating Base Images</a>
<ul class="sectlevel3">
<li><a href="#_choosing_base_image">5.1.1. Choosing Base Image</a></li>
<li><a href="#_creating_base_image">5.1.2. Creating Base Image</a>
<ul class="sectlevel4">
<li><a href="#_using_tar">Using tar</a></li>
<li><a href="#_from_scratch">FROM scratch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_creating_layered_images">5.2. Creating Layered Images</a>
<ul class="sectlevel3">
<li><a href="#_creating_component_or_application_images">5.2.1. Creating Component or Application Images</a></li>
</ul>
</li>
<li><a href="#creating_concise">5.3. Create small and concise images</a>
<ul class="sectlevel3">
<li><a href="#_clear_packaging_caches_and_temporary_package_downloads">5.3.1. Clear packaging caches and temporary package downloads</a>
<ul class="sectlevel4">
<li><a href="#_clearing_package_cache_and_squashing">Clearing package cache and squashing</a></li>
</ul>
</li>
<li><a href="#_remove_unnecessary_packages">5.3.2. Remove unnecessary packages</a></li>
<li><a href="#_installing_documentation">5.3.3. Installing Documentation</a></li>
<li><a href="#squashing">5.3.4. Squashing layers</a>
<ul class="sectlevel4">
<li><a href="#_docker_save">docker save</a></li>
<li><a href="#squash_tools">Custom Tools</a></li>
<li><a href="#_repercussions_of_squashing">Repercussions of squashing</a></li>
</ul>
</li>
<li><a href="#_chaining_commands">5.3.5. Chaining Commands</a>
<ul class="sectlevel4">
<li><a href="#_using_semi_colons_vs_double_ampersands">Using semi-colons (;) vs double ampersands (&amp;&amp;)</a></li>
</ul>
</li>
<li><a href="#_locales">5.3.6. Locales</a></li>
</ul>
</li>
<li><a href="#_labels">5.4. Labels</a>
<ul class="sectlevel3">
<li><a href="#_when_are_they_required">5.4.1. When are they required?</a></li>
<li><a href="#_descriptive_labels">5.4.2. Descriptive labels</a></li>
<li><a href="#_action_oriented_labels">5.4.3. Action-oriented labels</a></li>
<li><a href="#_recommended_labels_for_your_project">5.4.4. Recommended labels for your project</a></li>
</ul>
</li>
<li><a href="#_template">5.5. Template</a></li>
<li><a href="#_starting_your_application">5.6. Starting your application</a>
<ul class="sectlevel3">
<li><a href="#_calling_the_binary_directly_2">5.6.1. Calling the binary directly</a>
<ul class="sectlevel4">
<li><a href="#_using_the_cmd_instruction">Using the CMD Instruction</a></li>
<li><a href="#_using_the_entrypoint_instruction">Using the ENTRYPOINT Instruction</a></li>
</ul>
</li>
<li><a href="#creating_using_a_script">5.6.2. Using a script</a></li>
<li><a href="#creating_using_systemd">5.6.3. Using systemd "inside the container"</a></li>
<li><a href="#_using_systemd_to_control_containers">5.6.4. Using systemd to control containers</a></li>
</ul>
</li>
<li><a href="#_creating_a_help_file">5.7. Creating a Help file</a>
<ul class="sectlevel3">
<li><a href="#_location">5.7.1. Location</a></li>
<li><a href="#_required_headings">5.7.2. Required headings</a>
<ul class="sectlevel4">
<li><a href="#_description">DESCRIPTION</a></li>
</ul>
</li>
<li><a href="#_usage">5.7.3. USAGE</a></li>
<li><a href="#_history">5.7.4. HISTORY</a></li>
<li><a href="#_optional_headings">5.7.5. Optional headings</a>
<ul class="sectlevel4">
<li><a href="#_labels_2">Labels</a></li>
<li><a href="#_security_implications">Security Implications</a></li>
</ul>
</li>
<li><a href="#_sample_template">5.7.6. Sample template</a></li>
<li><a href="#_example_help_file_for_the_rsyslog_container">5.7.7. Example help file for the rsyslog container</a></li>
<li><a href="#_converting_markdown_to_man_format">5.7.8. Converting markdown to man format</a></li>
</ul>
</li>
<li><a href="#_creating_a_changelog">5.8. Creating a Changelog</a></li>
<li><a href="#_verifying_dockerfile_linter">5.9. Verifying Dockerfile (linter)</a></li>
<li><a href="#_dockerfiles_2">5.10. Dockerfiles</a></li>
<li><a href="#_dockerfiles_3">5.11. Dockerfiles</a>
<ul class="sectlevel3">
<li><a href="#_location_2">5.11.1. Location</a></li>
<li><a href="#_images">5.11.2. Images</a></li>
<li><a href="#_content">5.11.3. Content</a></li>
<li><a href="#_enabling_necessary_repositories">5.11.4. Enabling Necessary Repositories</a></li>
<li><a href="#_users">5.11.5. Users</a></li>
<li><a href="#_working_directory">5.11.6. Working Directory</a></li>
<li><a href="#_exposing_ports">5.11.7. Exposing Ports</a></li>
<li><a href="#_logging_2">5.11.8. Logging</a></li>
</ul>
</li>
<li><a href="#_references">5.12. References</a></li>
</ul>
</li>
<li><a href="#build">6. Building Applications</a>
<ul class="sectlevel2">
<li><a href="#_simple_build">6.1. Simple build</a></li>
<li><a href="#_use_a_build_service">6.2. Use a build service</a></li>
<li><a href="#_container_development_kit">6.3. Container Development Kit</a>
<ul class="sectlevel3">
<li><a href="#_openshift_vm">6.3.1. OpenShift VM</a></li>
<li><a href="#_kubernetes_vm">6.3.2. Kubernetes VM</a></li>
<li><a href="#_eclipse_docker_vm">6.3.3. Eclipse/Docker VM</a></li>
</ul>
</li>
<li><a href="#_build_environment">6.4. Build Environment</a></li>
</ul>
</li>
<li><a href="#Maintaining">7. Maintaining</a>
<ul class="sectlevel2">
<li><a href="#_lifecycle_2">7.1. Lifecycle</a>
<ul class="sectlevel3">
<li><a href="#_techniques_for_upgrades">7.1.1. techniques for upgrades</a></li>
</ul>
</li>
<li><a href="#_garbage_collection">7.2. Garbage Collection</a></li>
</ul>
</li>
<li><a href="#Appendix">8. Appendix</a>
<ul class="sectlevel2">
<li><a href="#_atomic_application">8.1. Atomic application</a>
<ul class="sectlevel3">
<li><a href="#help">8.1.1. Displaying the help file</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_audience">1. Audience</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This documentation has been written specifically for the developers who are writing
Dockerfiles to create images.  Dockerfiles can become rather complex depending on the
application being containerized so we are passing on our experience with Dockerfiles
through a series of best practices.</p>
</div>
<div class="paragraph">
<p>This guide of best practices is not a reference guide of all the Dockerfile instructions.  There
is plenty of documentation available on the <a href="https://www.docker.com/">Docker website</a> should
you require that sort of content.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Overview">2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Container technology is a popular packaging method for developers and system administrators to build, ship and run distributed applications. Production use of image-based container technology requires a disciplined approach to development. This document provides guidance and recommendations for creating and managing images to control application lifecycle.</p>
</div>
<div class="paragraph">
<p>In <a href="#plan"><strong>Application Planning</strong></a> we discuss how to deconstruct applications into microservices, common types of images and how planning must consider the target deployment platforms.</p>
</div>
<div class="paragraph">
<p><a href="#create"><strong>Creating Images</strong></a> discusses the details about how to work with Dockerfiles, best practices, tips and tricks, and tools available to developers.</p>
</div>
<div class="paragraph">
<p>The <a href="#build"><strong>Build</strong></a> section discusses the importance of automation in building, testing and maintaining images. We discuss ideal workflows, how to plan a test environment, types of testing and image certification.</p>
</div>
<div class="paragraph">
<p>Finally, <strong>Delivery</strong> covers how to get images and updates to the end-users, whether that&#8217;s inside an enterprise or public infrastructure. A key consideration is access control.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Goals">3. Goals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_provide_general_guidance_on_containerizing_applications">3.1. Provide general guidance on containerizing applications</h3>

</div>
<div class="sect2">
<h3 id="_provide_a_deep_dive_into_specific_challenges_related_to_container_technology">3.2. Provide a deep-dive into specific challenges related to container technology</h3>

</div>
<div class="sect2">
<h3 id="_describe_a_complete_end_to_end_journey_of_a_containerized_application_including_the_technology_tools_and_best_practices">3.3. Describe a complete end-to-end journey of a containerized application, including the technology, tools and best practices</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="plan">4. Application Planning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As you begin to contemplate the containerization of your application, there are number of factors that
should be considered prior to authoring a Dockerfile.  You will want to plan out everything from
how to start the application, to network considerations, to making sure your image is architected in a way that
can run in multiple environments like Atomic Host or OpenShift.</p>
</div>
<div class="paragraph">
<p>The very act of containerizing any application presents a few hurdles that are perhaps considered
defacto in a traditional Linux environment.  The following sections highlight these hurdles and
offer solutions which would be typical in a containerized environment.</p>
</div>
<div class="sect2">
<h3 id="_persistent_storage_simple_database_server">4.1. Persistent Storage: Simple Database Server</h3>
<div class="paragraph">
<p>Introduce the basic environment and began to foreshadow the perceieved complications</p>
</div>
<div class="sect3">
<h4 id="_traditional_database_server">4.1.1. Traditional database server</h4>
<div class="paragraph">
<p>One of the simpler environments in the IT world is a database that serves one or more
client nodes.  A corporate directory is an example most of us can identify with.  Consider
the figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZQAAAIeCAYAAACcBvmDAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIZDxIY7YVV7wAAIABJREFUeNrs3XdcFGfiBvAHRGTpZWnCUgQFC81eERVFjeXSbOdpTExiD565xHiJuSSekmpL1BijsZ3RRI2nUUHsRFHQRQUsgCK7VJe2tAXB+f3hb+cggIKgUp7v58MH2Ck7887sPvPOvPOOjiAIAoiIiBpIl0VAREQMFCIiYqAQEREDhYiIiIFCREQMFCIiYqAQEREDhYiIiIFCREQMFCIiYqAQEREDhYiIiIFCREQMFCIiYqAQEREBeiyCp0ehUGD37t1QqVQsDKJnTCqVYuLEiZDJZCwMBkrzt337duzfvx/R0dEsDKJnzNfXF2VlZViyZAkLg4HS/CmVSkRHR8PPzw8jRoxggRA9I2FhYZDL5ejXrx8Lg4HSsvTt2xchISEsCKJnRK1WQy6XsyCeMV6UJyIiBgoRETFQiIiIgUJERMRAISIiBgoRETVlbDZMLY6Ojk6V/wVBYKEQMVCIgcBAIGoueMqLiIhYQyGqCWs0RKyhEBERA4Wo6dDR0anyU1lubm6VYQEBAQCAS5cuYeTIkTA3N4eZmRnGjRuHmzdv1nv+jxr+17/+VXytbdu2uHr1arVpIyIi0KZNG3G8N998kxuUGChETZGhoWG1gImOjsbgwYMRGhqK/Px8qNVqHDx4EP7+/khPT2+09163bh2cnJwAAOXl5XjzzTfx4MEDcXhxcTFmzJghvubp6YnVq1dzoxEDhagpatu2bZX/1Wo15s6di6KiomrjZmVl4euvv2609zYzM8P27duhq/vwY3fx4sUqgfHBBx8gMTERAKCvr49du3ZVC0AiBgpRU9nhdavu8snJybh16xYuXLgAlUqF/v37Vxl+4sSJRn1/f39/vP/+++L/H330EZKTk3HmzBmsXbtWfD0kJAS+vr7cYMRAIWpOli5dit69e8PKygqffvpplWFKpbLR3++TTz5Bz549AQBFRUWYOXMmZsyYIbZOCwoKQnBwMDcMMVCImpsxY8aIf3fv3r3KMJVK1ejv17ZtW+zcuVM8nXX8+HHcvn0bAGBjY4OtW7fWeLGfiIFC1MTJZDLxbzMzsyrDntY9LZ06dcI333xT7fUtW7bA1taWG4UYKETNkYGBwf8+ELr1/0hUbqlVUlJS5+mSkpKqvXbjxg1uEGKgELVWarVa/Luu11yOHTuGr776qtrrixcvRlRUFAuVGChErYFUKq3yv1wuF/8+ePDgY6e/d+8epk2bJp5Oe+uttzBo0CAAwP379zFp0qQqIUXEQCFqoRwdHav8/69//Qs5OTmIjIzEZ5999shpBUHAa6+9hoyMDABAhw4d8M0332Dbtm0wNTUFANy+fZt3yBMDhehp+HNXJjX9PEtDhgyp8v+ZM2dgZWWFfv36wdXVFS4uLrVOu3r1ahw+fFhcry1btsDIyAguLi5Ys2aNON6ePXuwceNGbnxioBC1ZIsWLap22gsAJBIJ1q1bV+3u9rKyMgBATEwMFi9eLL7+zjvvwN/fX/x/+vTpePnll8X/g4ODERsbywInBgpRS+Xg4ICzZ89izJgxMDU1hampKQIDA3HixAn07du3WtNjtVqNoqIiTJo0CaWlpQAeNhtevnx5tXl///33sLe3B/CwxdiECRNQXFzMQqdmgc9DoSanofd+PG76hg4HHnbcWNsF+HPnztX4el2aBFtZWSEtLY07AbGGQkREDBQiIiIGChERMVCIiIiBQkRExEAhIiIGChERMVCIiIiBQkRExEAhIiIGChERMVCIiIiBQkRExEAhIiIGChERMVCIiIiBQkRExEAhIiIGChERMVCIiIgYKERExEAhIiIGChERMVCIiIgYKERExEAhIiIGChERMVCIiIgYKERExEAhIiIGChERMVCIiIgYKERExEAhIiIGChEREQOFiIgYKERExEAhIiIGChEREQOFiIgYKERExEAhIiIGChEREQOFiIgYKERExEAhIiJioBAREQOFiIgYKERExEAhIiJioBAREQOFiIgYKERExEAhIiJioBAREQOFmrCKigqkpaWxIIiIgUIN869//QtBQUEICwtjYRARA4WeTHp6OlasWIHY2FgsXbqUBUJEDBR6MuvWrUNFRQUA4MKFC5DL5SwUImKgUP2UlJRgw4YNAIDu3bsDAFatWsWCISIGCtXPjh07oFKpYG9vj88//xwA8PPPPyM9PZ2FQ0QMFKobQRDE2sicOXMQGBgIPz8/lJWVYd26dSwgImKgUN2EhYUhPj4eEokEs2bNAgAEBwcDADZs2ICSkhIWEhEDhejxVq5c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REQMFCIiIgYKERExUIiIiIFCREQMFCIiIgYKERExUIiIiIFCREQMFCIiIgYKERExUIiIiIFCRETEQCEiIgYKERExUIiIiIFCRETEQCEiIgYKERExUIiIiIFCRETEQCEiIgYKERExUIiIiIFCRETEQCEiIgYKERExUIiIiBgoRETEQCEioiZIrz4jKxQK7N69GyqVqtmtaGRkpPh78eLFzXJjSaVSTJw4ETKZjHsuETXvQNm+fTv279+P6OjoZrvCcrkccrm8WS67r68vysrKsGTJEu651Ko054PZlnBAW9eD2XoFilKpRHR0NPz8/DBixAju5c9QWFgY5HI5+vXrx8KgVqclHMw25wPauh7M6j3JzPv27YuQkBDu5c+QWq1utjUroobiwWzzOJjVY3ERUXPBg9mmfTDLVl5ERNQoGChERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiYqAQEREDhYiIGChERMRAISIiYqAQEREDhYiIGCh1oqOjI/44OjqitLS01uGNQaPRNHiepaWl+Pvf/w5dXd1GXTYi4vfP4/z6668YNGgQLC0tYWBgAC8vL6xduxaCIDBQKktNTcWmTZua9A4YHx+PPn36YOXKlc99AxJR6/r+Wb9+PV599VVEREQgNzcXpaWliI2NxYIFC/DJJ58wUP4sJCQEZWVlTXaDBgUFQalU4pdffuEnkKiFaerfP1u2bIGFhQXatm2L8PBwhIaGisO2bt3KQNGSSqVwdHSEUqms01HC3bt38frrr8PBwQH6+vqws7PDlClTcPPmzSrjbdy4Ea6urpBIJBg4cCDi4uIeOc833ngDHh4ekEgksLa2xqRJk5CYmCiOExgYiGvXruGVV17hp4+ohWgu3z8XL15ETk4OysrKMGzYMAwaNEgclpeX93wLUaiH2bNnCwCE2bNnC40JgABAaNeunbB27VoBgCCTyYTS0tIqwysvbnJysmBtbV1lmPbHzMxMuHHjhiAIgnD06NFqw52cnGqcZ1JSkiCVSmucp1QqFRQKRa3LXs+irLenVfbEMm/t26I5f/+Ul5cLGzZsEMebPn36cy37JlVDKS0txcyZM2Fvbw+FQoEff/yx1nGXLl2Ke/fuAQD+/ve/Iy8vD++99x4AID8/H//6178AAKtXrxanef/996FWqzF27Nha56lSqQAABw4cgEajwf79+wEAKpUKy5cv52EcUQvVHL9/9PT0MGvWLJibmyM4OBjr1q1jDeXPab1y5coqRwk1pbmdnZ34WmpqqiAIgpCamiq+ZmtrKwiCILRv377aeEqlssZ52tjY1Hh0oP1xc3NjDYVHxdRCayjN+ftHR0dHGDx4sJCUlMQayp+9/fbbsLW1hUKhwObNm9G2bdtq42iTHACsra3Fc6Ba2dnZtY5nY2NT4/vm5OQ8crmUSiUP44hauOb0/VNeXo4ffvgBgiDg9OnTmDlz5nMtuyYZKBKJBIsWLQIArFixAqampjVeQNPSVj0zMjLE17QbzcrKqtpOoFAoar0op5Wfnw9BEKr8aDQaftqIWrjm9P3Tpk0bTJ06Vfw/MjKSgVKTOXPmQCqVIiUlRUz7yoKCgsS/v/nmG6jVanz99dfVhnt5eYmvrVq1Cmq1GiEhITW+57Bhw8S/Q0JCoFarsWvXLhgaGkImk2HixIn8tBG1Ak35+ycgIAC2trYwMDDA+fPnERERUWMoPRdN8RqK1vLly6udR9S6e/dura0sbG1thZSUFEEQBGH//v3Vhnt4eFT5v6KiQhAEQUhMTBQsLS1rnGe7du2EU6dOVVve2n54Pp/n7al5XkNp6t8/X3zxRa3fOyEhIbyGUpt58+bB0tKyxmFOTk6IiorCtGnTYGdnBz09Pdjb2+P1119HVFQUZDIZAOAvf/kLPv/8c9ja2kIikWDw4ME4cOBAlfkWFxcDANzc3HDp0iW89tprcHBwgJ6eHszNzfHCCy/gzJkzGDx4MA/diFqJpvr98+677+Lbb7+Ft7c3DAwMYGpqih49euDbb7/F+++//1zLTK8pbLjaui8xMTGpsbqp5ezsXKc7Q9977z2xSZ9WbfN1cXHBli1bnmh5iaj5aW7fPzo6Opg7dy7mzp3b5MqSvQ0TEREDhYiIGChERMRAISIiYqAQEREDhYiIGChERMRAISIiYqAQEREDhYiIGChERMRAISIiYqAQEREDhYiIGChEREQMFCIiYqAQEREDhYiIGChEREQMFCIiYqAQEREDhYiIGChEREQMFCIiYqAQEREDhYiIGChEREQMFCIiYqAQEREDhYiIiIFCREQMFCIiYqAQEREDhYiIiIFCREQMFCIiYqAQEREDhYiIqO70nmSiyMhILF68uNmtrJGREYqKiprlhoqMjOTeSkQtJ1AcHBzg6+sLuVwOuVze7Fa2Y8eOSEhIaLYbq1u3bnBwcOBeS61Wcz2YBQA9PT2Ul5e36IPZegXKtGnT0K5dOwQFBTXLDdqcaygAIJVKMXHiRH6rUKvT3A9mAcDU1BRqtbpFH8zWK1BkMhneffdd7t1E9Ew194PZ5lxDqc/BrB53VSJq6ngw2zywlRcRETFQiIiIgUJERAwUIiIiBgoRETFQiIiIgUJERAwUIiIiBgoRETFQiIiIgUJERAwUIiIiBgoRETFQiJHqR6wAAAbISURBVIiIgUJERMRAISIiBgoRETFQiIiIgUJERMRAISIiBgoRETFQiIiIgUJERMRAISIiBgoRETFQiIioddJjEdDTolAosHv3bqhUqma5/JGRkeLvxYsXN7vll0qlmDhxImQyGXdGYqBQ87Z9+3bs378f0dHRzXo95HI55HJ5s1tuX19flJWVYcmSJdwZiYFCzZtSqUR0dDT8/PwwYsQIFsgzFBYWBrlcjn79+rEwiIFCLUffvn0REhLCgniG1Gp1s6xVUfPGi/JERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoRETFQiIiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiBgoREREDhYiIGChERMRAISIiYqAQEREDhYiIGChERMRAISIiYqAQEREDhYiIGChERMRAISIiYqBQC6ejoyP+ODo6orS0tNbhjUGj0TR4njt37kSvXr0gkUhgbm6Onj174rvvvuPGJAYKUVORmpqKTZs2NellXLt2LaZOnYro6GhoNBrk5+fj0qVLmDdvHv79739zIxIDhaipCAkJQVlZWZNdvu3bt8PExAR6enqIiIjAiRMnxGHr16/nBiQGCtHzJpVK4ejoCKVSWadayt27d/H666/DwcEB+vr6sLOzw5QpU3Dz5s0q423cuBGurq6QSCQYOHAg4uLiHjnPN954Ax4eHpBIJLC2tsakSZOQmJgojnPx4kWo1Wrcv38fAwYMQL9+/cRhKpWKG5JaBoHoKZk9e7YAQPi/du0mtIktDOP4cyESI5hKzGdDYiELNwpdujKgCxcidpeVIqVQ/ICCQnQlrtK6UFNcp0URxFXITlwVV0KQUtwUqWAzCQi1YmYhCSjvXVwyNGTivVz03ib8fzAwnXNyMj0z5ek7Z65evfrLx5ZkkiwYDNrjx49NkmUyGet2u33te2/xjx8/WiwW62vrbRMTE7a5uWlmZi9fvhxoz2azvmN++PDBotGo75jRaNQcx/E9/2fPnnn9Tp06NVJzDwxDhYKR1u12NTc3p1QqJcdxVKlUhva9e/eudnZ2JEk3b97U169fVSwWJUntdlv37t2TJC0vL3ufuX37tlzX1YULF4aO2aswarWaOp2OqtWqV3mUSqWBz7x7907Xr1+X9NfLA0tLS1xIUKEA/3eF0ruFHz161Fel+FUTyWTSO9ZqtczMrNVqeccSiYSZmU1OTg70azabvmPG43Hf6qS35XK5vvPe2Njoq5LK5fLIzT1AhYKxNj8/r0QiIcdxtLKyogMHDgz02btWEYvFvDWYnt3d3aH94vG47/d++fLlp+fVbDa9/c3NTZ05c0Y7OzsKBoN6+vSpFhYWuHgYGwQKxkIoFNKtW7ckSYuLiwqHwwN99oZH79HXp0+fvGO90Dh69OhACDmO4/u9e8dst9sys76t0+lIklzX1cWLF7W7u6twOKxXr17p0qVLXDgQKMB+dO3aNUWjUTUaDa/a2OvcuXPe/sOHD+W6rh48eDDQfvLkSe9YuVyW67pD1znOnj3r7S8tLcl1XT1//lyHDh1SJpNRoVCQJJVKJb1//16SVKlUdPr0aS4Yxg9P/TAOayg9pVJpYB2jZ3t7e+hbXolEwhqNhpmZVavVgfbjx4/3/fzjxw8zM9va2rJIJOI7ZjAYtLW1NTMzO3jw4E/XWlhDAWsowD5z48YNRSIR37ZsNqt6va7Lly8rmUwqEAgolUppdnZW9XpdmUxGkjQzM6P79+8rkUgoFAopn8+rVqv1jfvt2zdJUi6X09u3b3XlyhWl02kFAgEdOXJE58+f1+vXr5XP5yXJe/QFjLMAU4ARrax9jx8+fNj3cVfPsWPH9OTJk78dv1gseq8U9wwbd2pqSqurq//qfIFxQoUCACBQAAAECgCAQAEAgEABABAoAAACBQBAoAAAQKAAAAgUAACBAgAgUAAAIFAAAAQKAIBAAQCAQAEAECgAAAIFAECgAABAoAAACBQAAIECACBQAAAgUAAABAoAgEABABAoAAAQKAAAAgUAQKAAAECgAAAIFAAAgQIAIFAAACBQAAAECgCAQAEAECgAAPxzAaYAv9ubN290586d0fwDCQT0/fv3kZxzgEDB2Ein05qentb6+rrW19dH8ncIh8NyXXckz/3EiRNKp9PciPjP/GFmxjTgd3AcRy9evNDnz59H9z+uEa1QJCkajapQKCiTyXAzgkABAIwOFuUBAAQKAIBAAQAQKAAAECgAAAIFALCf/QmcjVBU+vx0RwAAAABJRU5ErkJggg==" alt="simple db">
</div>
<div class="title">Figure 1. Simple database topology</div>
</div>
<div class="paragraph">
<p>In this scenario, we have a single server running a Linux distribution.  The server functions
largely as a database server (perhaps postgres) for other clients that can connect to it on
the network.  The database is capable of connecting to the clients on the network using the
standard TCP/IP network stack and typically a combination of TCP socket and port.  In the case
of posgres, the default port is 5432.</p>
</div>
<div class="paragraph">
<p>More importantly, many database implementations store the database files on reliable, Enterprise
storage such as SANs or robust RAID arrays.  This is done to obviously protect the database
from data loss. By default, containers have immutable storage; and therefore, if the container
is deleted, your data will be lost. As a developer, you will need to understand and design
your containerization in a way that will allow for data to persist regardless of the state
of the container.</p>
</div>
</div>
<div class="sect3">
<h4 id="_containerized_environment">4.1.2. Containerized Environment</h4>
<div class="paragraph">
<p>In the case of a database server, retaining your data can be critical.  The default storage for
containers themselves is not persistent but it can be with a little planning.  The most common
way to allow for data persistence is using one of the <a href="#planning_storage">several methods</a>
already available to docker or your chosen deployment platform.  The following figure is a simplified
containerized topography of the same database from above.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="simple db containerized">
</div>
<div class="title">Figure 2. Containerized database</div>
</div>
<div class="paragraph">
<p>Note how the container host, like the traditional Linux deployment, has enterprise storage
associated with it.  Through the use of a <a href="https://docs.docker.com/engine/userguide/containers/dockervolumes/">docker volumes</a>,
we can assign storage to containers and those volumes will persist irregardless of the
state of the container.</p>
</div>
<div class="paragraph">
<p>For more information about planning for persistent storage, check out the
<a href="#planning_storage">Storage Options</a> section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_container_interconnection_database_server_with_local_and_distributed_clients">4.2. Container Interconnection: Database Server with Local and Distributed Clients</h3>
<div class="paragraph">
<p>By definition, distributed application components need to communicate with one another.
Container technologies encourage developers to make these interconnection points explicit and
provide a number of mechanisms to coordinate or otherwise enable communication between containers.</p>
</div>
<div class="sect3">
<h4 id="_traditional_database_server_environment">4.2.1. Traditional Database server/environment</h4>
<div class="paragraph">
<p>Consider the database example in the previous section.  Once we have established persistent
storage for the database server, we also need to consider how database clients will connect to it.
In nearly all cases these connections will occur through a socket, ever over the network or locally
via UNIX domain socket special file.</p>
</div>
<div class="paragraph">
<p>(Diagram placeholder - Block for running container, inset for listening port on top of container
block, distinct block outside of container showing shared/mapped directories for UNIX sockets.)</p>
</div>
<div class="paragraph">
<p>Simple non-distributed applications may assume that a database is co-located on the same server
and use an established port number, or UNIX domain socket path, as their default access mechanism.</p>
</div>
<div class="paragraph">
<p>True multi-node distributed applications may host the database as a distinct node in which case
communication must occur via the network.  Clients that wish to use the database must be made
aware of its location, either via explicit configuration or a service discovery mechanism.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="interconnect single">
</div>
<div class="title">Figure 3. Traditional DB environment using both socket and TCP/IP connections</div>
</div>
</div>
<div class="sect3">
<h4 id="_container_environment_docker">4.2.2. Container environment - Docker</h4>
<div class="paragraph">
<p>The previous example shows a traditional database where a single node allows both socket
and port (TCP/IP) connections.  If we were to "containerize" the database server and
the database client into seperate containers, this would present a slight challenge in
the architecture due to the container namespacing.  Consider the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="single node mult containers">
</div>
<div class="title">Figure 4. Single Node Database with server and client in separate containers</div>
</div>
<div class="paragraph">
<p>In this setup, there are actually two clients.  One is containerized and the other is executing
from the container host directly.  The database is also containerized but isolated by namespacing
as well.  The database client executing on the host can still communicate with the containerized
database server via TCP/IP because Docker has an internal network for containers to communication with
each other and the host.  Once an interconnection mechanism has been established a container developer must ensure
that service containers are properly configured to allow access to these connections.</p>
</div>
<div class="paragraph">
<p>Some container coordination frameworks, such as Kubernetes, attempt to simplify this use case for
containers co-located on a single node by sharing the network port space between node-local containers.</p>
</div>
<div class="paragraph">
<p>Further details and examples of networking interconnect options for various contaner frameworks and
scenarios can be found in the <a href="#planning_network">network considerations</a> section of this document.</p>
</div>
<div class="paragraph">
<p>For non-network connections between containers on a single node, shared filesystem locations, either for
domain sockets or actual filesystem content, must be set up at the time the containers are launched.
Docker, for example, allow mapping a host directory to a container directory by adding the following
argument to the run command:</p>
</div>
<div class="paragraph">
<p>-v &lt;host_directory&gt;:&lt;container_directory&gt;</p>
</div>
<div class="paragraph">
<p>In our DB server example, assuming the database maintains a listening UNIX domain socket in
"/var/run/postgres" we could launch both our server and client with the following argument included:</p>
</div>
<div class="paragraph">
<p>-v /var/run/postgres:/var/run/postgres</p>
</div>
<div class="paragraph">
<p>This will ensure that both the server and client see the same directory content, exported from the host,
allowing the client to connect using the expected/default location.</p>
</div>
<div class="paragraph">
<p>Further details and example can be found in the <a href="#planning_storage">storage considerations</a> section of
this document.</p>
</div>
<div class="paragraph">
<p>Another iteration on this scenario would be where the database server and clients are on different nodes
and require network access to communicate.  In this case, you must ensure that Docker not only exposes a
port for the database container but that a port is also exposed to the network so other clients can
communicate with it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="multi node single container">
</div>
<div class="title">Figure 5. Multiple node deployment where server and client are separated</div>
</div>
<div class="paragraph">
<p>Notice how in this scenario, the database server is still containerized but the client resides on a different
node.
For network connections, Docker provides a simple directive in the Dockerfile to expose a port from the
running container.  For example, to create a Postgres DB server container that listens on the default
Postgres port, you would add the following line:</p>
</div>
<div class="paragraph">
<p>EXPOSE 5432</p>
</div>
<div class="paragraph">
<p>You then also need to ensure that you perform the port mapping when the container runs using either the -P or -p
flags.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_initialization">4.3. Data Initialization</h3>
<div class="paragraph">
<p>A truly stateless application component acquires all configuration information via combination of discovery or injection via a cloud, container or configuration management framework. It assumes that all local storage is ephemeral and that any data that requires persistence beyond a shutdown, reboot or termination must be stored elsewhere.</p>
</div>
<div class="paragraph">
<p>In practice, many applications are not truly stateless in the sense defined above. Instead they require at least some element of persistent state or storage to be made available or "attached" to the component at the time it is launched. Frequently, this storage must be initialized the first time the application is run.</p>
</div>
<div class="sect3">
<h4 id="_examples">4.3.1. Examples</h4>
<div class="ulist">
<ul>
<li>
<p>Creation of schema/tables and initial population of a relational database</p>
</li>
<li>
<p>Initialization of configuration data, such as the location of a central server or executive to which the application component should connect.</p>
</li>
<li>
<p>Initialization of unique identifying information such as a UUID, key pair or shared secrets</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_key_issues">4.3.2. Key Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Tracking whether initialization has occurred to ensure it only happens once or, at the very least, only occurs when the user wants it to</p>
</li>
<li>
<p>Selecting persistence between restarts of a component versus persistence beyond termination/removal</p>
</li>
<li>
<p>If data is persistent beyond termination of the component, re-associating the persistent storage with a freshly launched instance of the component (be it a VM or a container)</p>
</li>
<li>
<p>If data is persistent across restarts <em>and</em> updates to an underlying container image, ensuring that the “old” persistent data is still .  (Brent notes that our users have expectations in this area based on RPM behavior.)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_general_approaches_and_patterns_containers">4.3.3. General Approaches and Patterns - Containers</h4>
<div class="paragraph">
<p>Two common patterns have emerged to address components that require one time data initialization.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Automatic Initialization - In this pattern, any component that requires data initialization incorporates a check into initial start up. If the check determines that persistent data is already present, it continues as normal. If persistent data is not present, it performs the required data initialization before moving on to normal start up.</p>
</li>
<li>
<p>Explicit Initialization - In this pattern users must explicitly execute an initialization step prior to running an application component. Details may differ depending on the specific container tool or framework being used.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_persistent_storage_in_docker">4.3.4. Persistent Storage in Docker</h4>
<div class="paragraph">
<p>Docker containers provide persistence a few different ways.  Changes to the local file system of a running container persist across starts and stops but are lost if the container is ever removed.  If a user requires persistence beyond removal, Docker provides the concept of "Volumes" which are available in two flavors.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Data Volumes" are directories that exist outside of the container file system and whose contents persist even after a container is terminated.</p>
</li>
<li>
<p>"Bind Mounts" are host directories can also be directly mounted into a running container.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details on Docker storage configurations see the <a href="#planning_storage">storage considerations</a> section of this guide.</p>
</div>
</div>
<div class="sect3">
<h4 id="_framework_support">4.3.5. Framework Support</h4>
<div class="paragraph">
<p>This is an area of active development within the various container management frameworks and there is no silver bullet.</p>
</div>
<div class="paragraph">
<p>Generally speaking, if an application component does not provide some mechanism for automatic initialization it falls to the user to identify and perform perform any expected explicit storage initialization.  It is also the user&#8217;s responsibility to track the resulting persistent storage objects during the removal/termination/restart of a container or an update to the underlying container image.</p>
</div>
<div class="sect4">
<h5 id="_explicit_initialization_atomic_cli">Explicit Initialization - Atomic CLI</h5>
<div class="paragraph">
<p>The one exception is the Atomic CLI (aka "atomic run") which provides support within its metadata format for encoding any required explicit initialization steps.</p>
</div>
<div class="paragraph">
<p>(Brief example and then reference to atomic CLI docs.)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_security_and_user_requirements">4.4. Security and user requirements</h3>

</div>
<div class="sect2">
<h3 id="_host_and_image_synchronization">4.5. Host and image synchronization</h3>
<div class="paragraph">
<p>Some applications that run in containers require the host and container to more or less be synchronized on certain
attributes so their behaviors are also similar.  One such common attribute can be time.  The following sections discuss
best practices to keeping those attributes similar or the same.</p>
</div>
<div class="sect3">
<h4 id="_time">4.5.1. Time</h4>
<div class="paragraph">
<p>Consider a case where multiple containers (and the host) are running applications and logging to something like
a log server.  The log timestamps and information would almost be entirely useless if each container reported a different
time than the host.</p>
</div>
<div class="paragraph">
<p>The best way to synchronize the time between a container and its host is through the use of bind mounts.  You simply need
to bind mount the host&#8217;s <em>/etc/localtime</em> with the container&#8217;s <em>/etc/localtime</em>.  We use the <em>ro</em> flag to ensure the container
can&#8217;t modify the host&#8217;s time zone by default.</p>
</div>
<div class="paragraph">
<p>In your Dockerfile, this can be accomplished by adding the following to your RUN label.</p>
</div>
<div class="listingblock">
<div class="title">Synchronizing the timezone of the host to the container.</div>
<div class="content">
<pre class="highlight"><code>-v /etc/localtime:/etc/localtime:ro</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_machine_id">4.5.2. Machine ID</h4>
<div class="paragraph">
<p>The <em>/etc/machine_id</em> file is often used as an identifier for things like applications and logging.  Depending on your
application, it might be beneficial to also bind mount the machine id of the host into the container.  For example.
in many cases journald relies on the machine ID for identification.  The sosreport application also uses it.  To bind
mount the machine ID of the host to the container, add something like the following to your RUN label.</p>
</div>
<div class="listingblock">
<div class="title">Synchronizing the host machine ID with a container</div>
<div class="content">
<pre class="highlight"><code>-v /etc/machine_id:/etc/machine_id:ro</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_considerations_for_images_on_atomic_host_and_openshift">4.6. Considerations for images on Atomic Host and OpenShift</h3>

</div>
<div class="sect2">
<h3 id="_where_to_store_related_components">4.7. Where to store related components</h3>
<div class="sect3">
<h4 id="_scripts">4.7.1. scripts</h4>

</div>
<div class="sect3">
<h4 id="_tar_files">4.7.2. tar files</h4>

</div>
<div class="sect3">
<h4 id="_help_files">4.7.3. help files</h4>

</div>
<div class="sect3">
<h4 id="_dockerfiles">4.7.4. Dockerfiles</h4>

</div>
</div>
<div class="sect2">
<h3 id="planning_starting_application">4.8. Starting your applications within a container</h3>
<div class="paragraph">
<p>At some point in the design of your Dockerfile and image, you will need to determine how to start your
application.  There are three prevalent methods for starting applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Call the application binary directly</p>
</li>
<li>
<p>Call a script that results in your binary starting</p>
</li>
<li>
<p>Use systemd to start the application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the most part, there is no single right answer on which method should be used; however, there are
some softer decision points that might help you decide which would be easiest for you as the
Dockerfile owner.</p>
</div>
<div class="sect3">
<h4 id="_calling_the_binary_directly">4.8.1. Calling the binary directly</h4>
<div class="paragraph">
<p>If your application is not service-oriented, calling the binary directly might be the simplest and most
straight-forward method to start a container.  There is no memory overhead and no additional packages
are needed (like systemd and its dependencies).  However, it is more difficult to deal with
setting environment variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_script">4.8.2. Using a script</h4>
<div class="paragraph">
<p>Using a special script to start your application in a container can be a handy way to deal with slightly
more complex applications.  One upside is that it is generally trivial to set environment variables.  This
method is also good when you need to call more than a single binary to start the application correctly.
One downside is that you now have to maintain the script and ensure it is always present in the image.</p>
</div>
</div>
<div class="sect3">
<h4 id="planning_use_systemd">4.8.3. Use systemd</h4>
<div class="paragraph">
<p>Using systemd to start your application is a great if your application is service-oriented (like httpd).
It can benefit from leveraging well tested unit files generally delivered with the applications
themselves and therefore can make complex applications that require environment variables easy to work
with.  One disadvantage is that systemd will increase the size of your image and there is a small
amount of memory used for systemd itself.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As of docker-1.10, the docker run parameter of <em>--privileged</em> is no longer needed to use systemd
within a container.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can implement using <a href="#creating_using_systemd">systemd fairly simply in your Dockerfile</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_techniques_for_deploying_or_starting_images_from_a_host">4.9. Techniques for deploying or starting images from a host</h3>
<div class="sect3">
<h4 id="_host_systemd_considerations">4.9.1. host systemd considerations</h4>

</div>
<div class="sect3">
<h4 id="_native_docker_ah_unit_file">4.9.2. native docker (ah) unit file</h4>
<div class="sect4">
<h5 id="_example_unit_file_atomic_create_unit_file">example unit file - atomic create unit file</h5>

</div>
</div>
<div class="sect3">
<h4 id="_openshift_driven">4.9.3. openshift driven</h4>

</div>
</div>
<div class="sect2">
<h3 id="planning_network">4.10. Network Considerations</h3>
<div class="sect3">
<h4 id="_single_host">4.10.1. single host</h4>

</div>
<div class="sect3">
<h4 id="_multi_host">4.10.2. multi-host</h4>

</div>
<div class="sect3">
<h4 id="_aep_ose_docker_considerations">4.10.3. AEP / OSE / Docker considerations</h4>

</div>
</div>
<div class="sect2">
<h3 id="planning_storage">4.11. Storage Considerations</h3>
<div class="paragraph">
<p>When you architect your container image, storage can certainly be a critical consideration.  The power of containers is
that they can mimic, replicate, or replace all kinds of applications and therein lies why you must be careful in
considering how you deal with storage needs.</p>
</div>
<div class="paragraph">
<p>By nature, the storage for containers is ephemeral.  This makes sense because one of the attractions of containers
is that they can be easily created, deleted, replicated, and so on.  If no consideration to storage is given, the
container will only have access to its own filesystem.  This means if the container is deleted, whatever information
whether it is logs or data will be lost.  For some applications, this is perfectly acceptable if not preferred.</p>
</div>
<div class="paragraph">
<p>However, if your application generates important data that should be retained or perhaps could be shared amongst
multiple containers, you will need to ensure that this storage is setup for the user.</p>
</div>
<div class="sect3">
<h4 id="_persistent_storage_for_containers_data_volumes">4.11.1. Persistent storage for containers: Data Volumes</h4>
<div class="paragraph">
<p>Docker defines <a href="https://docs.docker.com/engine/userguide/containers/dockervolumes/">persistent storage</a> in two ways.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Data volumes</p>
</li>
<li>
<p>Data volume containers</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>However at present, the use of <a href="https://docs.docker.com/engine/userguide/containers/dockervolumes/#data-volumes">data volumes</a>
is emerging to be the preferred storage option for users of Docker.  The docker website defines a data volume as
<em>"a specially-designated directory within one or more containers that bypasses the Union File System."</em> It has the distinct
advantages that they can they can be shared and reused for one or more containers.  Moreover, a data volume will
persist even if the associated container is deleted.</p>
</div>
<div class="paragraph">
<p>Data volumes must be explicitly created and preferbaly should be named to provide it with a meaningful name.  You can
manually create a data volume with the <em>docker volume create</em> command.</p>
</div>
<div class="listingblock">
<div class="title">Creating a data volume for persistent storage</div>
<div class="content">
<pre class="highlight"><code>$ docker volume create &lt;image_name&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can also specify a driver name with the -d option
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_using_data_volumes_in_a_dockerfile">Using data volumes in a Dockerfile</h5>
<div class="paragraph">
<p>For developers whose applications require persistent storage, the trick will be instantiating the data volume
prior to running the image.  This, however, can be achieved leveraging the <a href="#label_action">LABEL metadata</a>
and applications like atomic.</p>
</div>
<div class="paragraph">
<p>We recommend that the data volume be created through the use of the INSTALL label.  If you recall, the INSTALL label
is meant to identify a script that should be run prior to ever running the image. In that install script, adding
something like the following can be used to create the data volume.</p>
</div>
<div class="listingblock">
<div class="title">Creating a data volume in your install script</div>
<div class="content">
<pre class="highlight"><code>chroot /host /usr/bin/docker volume create &lt;image_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To then use the data volume, the RUN label would need to use the bind mount feature.  Adding the following to your
RUN label would bind mount the data volume by name:</p>
</div>
<div class="listingblock">
<div class="title">Adding a data volume by name into your RUN label</div>
<div class="content">
<pre class="highlight"><code>-v &lt;data_volume_name&gt;:/&lt;mount_path_inside_container&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_persistent_storage_for_containers_mounting_a_directory_from_the_host">4.11.2. Persistent storage for containers: Mounting a directory from the host</h4>
<div class="paragraph">
<p>You can also leverage the host filesystem for persistent storage through the use of bind mounts.  The basic idea for this
is to use a directory on the host filesystem that will be bind mounted into the container at runtime.  This can be simply
used by adding a bind mount to your RUN label:</p>
</div>
<div class="listingblock">
<div class="title">Bind mounting a directory from the rootfs to a running container</div>
<div class="content">
<pre class="highlight"><code>-v /&lt;path_on_the_rootfs&gt;:/&lt;mount_path_inside_container&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>One downside to this approach is that anyone with privileges to that directory on the host will be able to view and
possibly alter the content.</p>
</div>
</div>
<div class="sect3">
<h4 id="_openshift_persistent_storage">4.11.3. OpenShift persistent storage</h4>

</div>
<div class="sect3">
<h4 id="_storage_backends_for_persistent_storage">4.11.4. Storage backends for persistent storage</h4>

</div>
</div>
<div class="sect2">
<h3 id="_logging">4.12. Logging</h3>
<div class="paragraph">
<p>If your application logs actions, errors, and warnings to some sort of log mechanism, you will want to consider how
to allows users to obtain, review, and possible retain those logs.  The flexibility of a container environment
can however present some challenges when it comes to logging because typically your containers are separated
by namespace and cannot leverage the system logging without some explicit action by the users.  There are also
several solutions for logging containers like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>using a logging service like rsyslog or fluentd</p>
</li>
<li>
<p>setting the docker daemon&#8217;s log driver</p>
</li>
<li>
<p>logging to a file shared with the host (bind mounting)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a developer, if your application uses logging of some manner, you should be thinking about how you will
handle your log files.  Each of aforementioned solutions has its pros and cons.</p>
</div>
<div class="sect3">
<h4 id="logging_use_service">4.12.1. Using a logging service</h4>
<div class="paragraph">
<p>Most traditional Linux systems use a logging service like <a href="http://www.rsyslog.com/">rsyslog</a> to collect and store
its log files.  Often the logging service will coordinate logging with journald but nevertheless it too is a service
will accept log input.</p>
</div>
<div class="paragraph">
<p>If your application uses a logger and you want to take advantage of the host&#8217;s logger, you can bind mount <em>/dev/log</em>
between the host and container as part of the RUN label like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>-v /dev/log:/dev/log</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the host distribution, log messages will now be in the host&#8217;s journald and subsequently into
<em>/var/log/messages</em> assumming the host is using something like rsyslog.</p>
</div>
</div>
<div class="sect3">
<h4 id="_setting_the_log_driver_for_docker_daemon">4.12.2. Setting the log driver for docker daemon</h4>
<div class="paragraph">
<p>Docker has the ability to <a href="https://docs.docker.com/engine/admin/logging/overview/">configure a logging driver</a>.  When
implemented, it will impact all containers on the system.  This is only useful when you can ensure that the
host will only be running your application as this might impact other containers.  Therefore this method has limited
usefulness unless you can ensure the final runtime environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="logging_host_shared_storage">4.12.3. Using shared storage with the host</h4>
<div class="paragraph">
<p>The use of <a href="#planning_storage">persistent storage</a> can be another effective way to deal with log files whether
you choose to perform a simple bind mount with the host or data volumes.  Like  using a logging service, it has the
advantage that the logs can be preserved irregardless of the state of the container.  Shared storage also reduces
the potential to chew up filesystem space assigned to the container itself.  You can bind mount either a file or
directory between host and container using the <em>-v</em> flag in your RUN label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>-v &lt;host_dir|file&gt;:&lt;image_dir|file&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_security_and_user_considerations">4.13. Security and User considerations</h3>
<div class="sect3">
<h4 id="_passing_credentials_and_secrets">4.13.1. Passing credentials and secrets</h4>
<div class="paragraph">
<p>Storing sensitive data like credentials is a hot topic, especially because Docker does not provide a designated option for storing and passing secret values to containers.</p>
</div>
<div class="paragraph">
<p>Currently, a very popular way to pass credentials and secrets in a container is specifying them as <strong>environment variables</strong> at container runtime. You as a consumer of such an image don&#8217;t expose any of your sensitive data publicly.</p>
</div>
<div class="paragraph">
<p>However, this approach also has caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you commit such a container and push your changes to a registry, the final image will contain also all your sensitive data publicly.</p>
</li>
<li>
<p>Processes inside your container and other containers linked to your container might be able to access this information. Similarily, everything you pass as an environment variable is accessible from the host machine using <strong>docker inspect</strong> as seen in the <a href="https://hub.docker.com/r/openshift/mysql-56-centos7/">mysql example below</a>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># docker run -d --name mysql_database -e MYSQL_USER=user -e MYSQL_PASSWORD=password -e MYSQL_DATABASE=db -p 3306:3306 openshift/mysql-56-centos
# docker inspect openshift/mysql-56-centos

&lt;snip&gt;

"Env": [
            "MYSQL_USER=user",
            "MYSQL_PASSWORD=password",
            "MYSQL_DATABASE=db",

&lt;snip&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are other ways how to store secrets and although using environment variables might lead to leaking private data in certain corner cases, it still belongs to the safest workarounds available.</p>
</div>
<div class="paragraph">
<p>There are a couple of things to keep in mind when operating with secrets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For obvious reasons, you should avoid using default passwords - users tend to forget to change the default configuration and in case a known password leaks, it can be easily misused.</p>
</li>
<li>
<p>Although squashing removes intermediate layers from the final image, secrets from those layers will still be present in the build cache.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_handling_secrets_in_kubernetes">Handling Secrets in Kubernetes</h5>
<div class="paragraph">
<p>Containers running through Kubernetes can take advantage of the <strong>secret</strong> resource type to store sensitive data such as passwords or tokens. kubernetes uses tmpfs volumes for storing secrets. To learn how to create and access these, refer to the <a href="http://kubernetes.io/docs/user-guide/secrets/">Kubernetes User Guide</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_other_projects_facilitating_secret_management">Other Projects Facilitating Secret Management</h5>
<div class="paragraph">
<p><strong>Custodia</strong></p>
</div>
<div class="paragraph">
<p>Custodia is an open-source project that defines an API for storing and sharing secrets such as passwords and certificates in a way that keeps data secure, manageable and audiatable. Custodia uses the HTTP protocol and a RESTful API as an IPC mechanism over a local Unix Socket. Custodia is fully modular and usrs can control how authentication, authorization and API plugins are combined and exposed. You can learn more details on the project&#8217;s <a href="https://github.com/latchset/custodia">github repository</a> or <a href="https://github.com/latchset/custodia/wiki">wiki page</a>.</p>
</div>
<div class="paragraph">
<p><strong>Vault</strong></p>
</div>
<div class="paragraph">
<p>Another open-source project that aims to handle secure accessing and storing of secrets is Vault. Detailed information about the tool and use cases can be found on the <a href="https://www.vaultproject.io/intro/index.html">Vault project website</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_namespace_mapping_docker_1_10_feature">4.13.2. User NameSpace Mapping (docker-1.10 feature)</h4>

</div>
<div class="sect3">
<h4 id="__a_href_https_www_openshift_com_promotions_docker_security_html_class_bare_https_www_openshift_com_promotions_docker_security_html_a">4.13.3. <a href="https://www.openshift.com/promotions/docker-security.html" class="bare">https://www.openshift.com/promotions/docker-security.html</a></h4>

</div>
</div>
<div class="sect2">
<h3 id="_preventing_your_image_users_from_filling_the_filesystem">4.14. Preventing your image users from filling the filesystem</h3>
<div class="paragraph">
<p>Most default docker deployments only set aside about 20GB of storage for each container.  For many applications, that
amount of storage is more than enough.  But if your containerized application produces significant log output,
or your deployment scenario restarts containers infrequently, file system space can become a concern.</p>
</div>
<div class="paragraph">
<p>The first step to preventing the container filesystem from filling up is to make sure your images
are <a href="#creating_concise">small and concise</a>.  This obviously will reduce how much space your
image consumes from the filesystem right away. However, as a developer, the following techniques
can be used by you to manage the container filesystem size.</p>
</div>
<div class="sect3">
<h4 id="_ask_for_a_larger_storage_space_on_run">4.14.1. Ask for a larger storage space on run</h4>
<div class="paragraph">
<p>One solution to dealing with filesystem space could be to increase the amount of storage allocated to the container when
your image is run.  This can be achieved with the following switch to <em>docker run</em>.</p>
</div>
<div class="listingblock">
<div class="title">Increase the container storage space to 60GB</div>
<div class="content">
<pre class="highlight"><code>--storage-opt size:60</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using a defined RUN label in your Dockerfile, you could add the switch to that label.  However,
abuse of this switch could lead to irking users and you should be prudent in using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_space_considerations_for_logging">4.14.2. Space considerations for logging</h4>
<div class="paragraph">
<p>Logging can sometimes unknowingly consume disk space, particularily when a service or daemon has
failed.  If your application performs logging, or more specifically verbose logging, consider the
following approaches to help keep filesystem usage down:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use logrotate inside the container periodically.</p>
</li>
<li>
<p>Mount your logs to a <a href="#logging_host_shared_storage">shared host filesystem</a></p>
</li>
<li>
<p><a href="#logging_use_service">Use a logging service or the host&#8217;s journalctl (/dev/log)</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_image_naming">4.15. Image naming</h3>
<div class="paragraph">
<p><a href="https://github.com/projectatomic/ContainerApplicationGenericLabels/blob/master/vendor/redhat/names.md" class="bare">https://github.com/projectatomic/ContainerApplicationGenericLabels/blob/master/vendor/redhat/names.md</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_deployment_considerations">4.16. Deployment Considerations</h3>
<div class="paragraph">
<p>Preparing applications for production distribution and deployment must carefully consider the supported
deployment platforms. Production services require high uptime, injection of private or sensitive data,
storage integration and configuration control. The deployment platform determines methods for load balancing,
scheduling and upgrading. A platform that does not provide these services requires additional work when
developing the container packaging.</p>
</div>
<div class="sect3">
<h4 id="_platform">4.16.1. Platform</h4>

</div>
<div class="sect3">
<h4 id="_lifecycle">4.16.2. Lifecycle</h4>

</div>
<div class="sect3">
<h4 id="_maintenance">4.16.3. Maintenance</h4>

</div>
<div class="sect3">
<h4 id="_build_infrastructure">4.16.4. Build infrastructure</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create">5. Creating Images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The base unit of creating an image is the Dockerfile itself.  This section
focuses on the instructions that make up a Dockerfile.</p>
</div>
<div class="paragraph">
<p>This chapter will not cover every Dockerfile instruction available but instead
will focus on specific ones that we want to re-enforce to those who develop
Dockerfiles.  Docker has published a
<a href="https://docs.docker.com/engine/reference/builder/">reference guide</a> already
covering each of the Dockerfile instructions. In addition, upstream docker has a nice description of <a href="https://docs.docker.com/engine/articles/dockerfile_best-practices/">best practices</a> for Dockerfiles. It
describes the various instructions that can be used to compose a Dockerfile and their best usage. Familiarize yourself with these
recommendations.</p>
</div>
<div class="sect2">
<h3 id="_creating_base_images">5.1. Creating Base Images</h3>
<div class="sect3">
<h4 id="_choosing_base_image">5.1.1. Choosing Base Image</h4>
<div class="paragraph">
<p>Images that have no parent are called base images. Docker image usually have their own root filesystem with an operating system installed. So when you want to create a new image, it either has to be based on an image that actually provides an operating system or you will need to create this layer in your image. The only difference to this are super minimal images that instead of an operating system provide only a single binary as described later in the text.
There is a wide variety of base images already available on Docker Hub, so the simplest solution is to use one from there. Here are a few things that should help you determine which base image will fit your needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux distribution - Your personal preference and perhaps experience is a reason why to choose a certain distribution rather than another one. However, you should definitely consider whether your containerized application requires specific libraries or tools from a specific system.</p>
</li>
<li>
<p>Image size - Base images usually contain a minimal operating system with a set of tools needed for basic operations. To preserve your environment small and efficient, size should also be taken into account when picking the right base image. The size varies; you can take advantage of super small base images, such as 2MB busybox, or use a standard minimal operating system, such as Fedora or CentOS that are up to 200MB in size.</p>
</li>
<li>
<p>Updates - Not all community images are necessarily rebuilt on a regular basis or when security vulnerabilities are addressed. You should therefore consider using base images from "official repositories" on Docker Hub, and confirm their update policy in advance.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creating_base_image">5.1.2. Creating Base Image</h4>
<div class="paragraph">
<p>Once you&#8217;ve considered all options and decided to create your own base image, the process will mostly depend on the distribution you chose. Note that the major distributions have their source files available on GitHub so you still might want to consider creating an issue or opening a pull request to suggest a change in the feature set or any adjustment.
<a href="https://docs.docker.com/engine/userguide/eng-image/baseimages/">Docker documentation</a> suggests two approaches to creating a base image, using tar and building an image "FROM scratch".</p>
</div>
<div class="sect4">
<h5 id="_using_tar">Using tar</h5>
<div class="paragraph">
<p>Using the tar tool is a simple way how to build a base image. As a prerequisite, you will need to set up a directory structure for chroot with all items that you wish to be part of the base image. There are various tools that might help you with this, for example <em>debootstrap</em> for Debian systems or <em>supermin</em> for RPM-based systems.</p>
</div>
<div class="paragraph">
<p>Once you have your chroot directory ready, it is as simple as running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># tar -C &lt;chroot_dir&gt; -c . | docker import - &lt;new_image_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that docker provides a set of scripts for base image creation that take advantage of tar: <a href="https://github.com/docker/docker/tree/master/contrib">https://github.com/docker/docker/tree/master/contrib</a>. Well known distributions then use their own build systems that usually also utilizes tar. For example Fedora&#8217;s <a href="https://fedoraproject.org/wiki/Koji/BuildingImages?rd=Koji/KojiLiveCDHowTo#Building_Disk_Images">koji</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_from_scratch">FROM scratch</h5>
<div class="paragraph">
<p>"scratch" is a special repository in the Docker Hub registry, created using an empty tarball. It is not meant to be pulled or run, and at any such an attempt you will most likely encounter this message: <em>'scratch' is a reserved name</em>.
Using scratch is ideal for creating extremely minimal images, for example for containerizing single binaries. An example is available from <a href="https://docs.docker.com/engine/userguide/eng-image/baseimages/">Docker documentation</a>.
scratch is also very handy for creating standard distribution base images. But as with tar, you&#8217;ll first need to prepare a directory structure for chroot. After that, just add the directory in your Dockerfile as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>FROM scratch
ADD &lt;chroot_dir&gt; /
CMD ["/bin/bash"]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_layered_images">5.2. Creating Layered Images</h3>
<div class="sect3">
<h4 id="_creating_component_or_application_images">5.2.1. Creating Component or Application Images</h4>

</div>
</div>
<div class="sect2">
<h3 id="creating_concise">5.3. Create small and concise images</h3>
<div class="paragraph">
<p>It is preferable to create small and concise images whenever possible.  This can
be highly dependent on the application you are containerizing, but there are
techniques to help you accomplish this.  The following sections cover these
techniques.</p>
</div>
<div class="sect3">
<h4 id="_clear_packaging_caches_and_temporary_package_downloads">5.3.1. Clear packaging caches and temporary package downloads</h4>
<div class="paragraph">
<p>Package managers can typically generate lots of metadata and also store downloaded content into a cache of
sorts. To keep images and layers as small as possible, you should consider clearing out these caches of downloaded
content.  Note how the following example ends with a <em>yum -y clean all</em> which removes deletable yum content.</p>
</div>
<div class="listingblock">
<div class="title">A singular RUN instruction performing multiple commands</div>
<div class="content">
<pre class="highlight"><code>RUN yum install -y epel-release &amp;&amp; \
    rpmkeys --import file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 &amp;&amp; \
    yum install -y --setopt=tsflags=nodocs bind-utils gettext iproute\
    v8314 mongodb24-mongodb mongodb24 &amp;&amp; \
    yum -y clean all</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are several package managers beyond yum that should be of note: dnf, rvm, gems, cpan, pip. Most of these
managers have some form of a clean up command that will handle excess cache created while performing their package management duties.</p>
</div>
<div class="paragraph">
<p>Below are examples pictured for dnf and rvm:</p>
</div>
<div class="listingblock">
<div class="title">dnf cleanup example</div>
<div class="content">
<pre class="highlight"><code>RUN rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm &amp;&amp; \
    dnf -y install nodejs tar sudo git-all memcached postgresql-devel postgresql-server \
    libxml2-devel libxslt-devel patch gcc-c++ openssl-devel gnupg curl which &amp;&amp; \
    dnf clean all &amp;&amp; \</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ruby(rvm) cleanup example</div>
<div class="content">
<pre class="highlight"><code>RUN /usr/bin/curl -sSL https://rvm.io/mpapis.asc | gpg2 --import - &amp;&amp; \
    /usr/bin/curl -sSL https://get.rvm.io | rvm_tar_command=tar bash -s stable &amp;&amp; \
    source /etc/profile.d/rvm.sh &amp;&amp; \
    echo "gem: --no-ri --no-rdoc --no-document" &gt; ~/.gemrc &amp;&amp; \
    /bin/bash -l -c "rvm requirements &amp;&amp; rvm install ruby 2.2.4 &amp;&amp; rvm use 2.2.4 --default &amp;&amp; \
    gem install bundler rake &amp;&amp; \
    gem install nokogiri --use-system-libraries &amp;&amp; \
    rvm cleanup all &amp;&amp; yum clean all &amp;&amp; rvm disk-usage all"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, notice the yum clean all called after rvm, this is because some package managers like rvm rely on others (like yum
in this case) to help perform their duties. Make sure to examine your container&#8217;s layers sizes to help determine where you can
eliminate excess size and keep it&#8217;s footprint size to a minimum.</p>
</div>
<div class="paragraph">
<p>Here is a listing of some package managers and the applicable cleanup commands:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Package Managers</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cleanup Command</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">yum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yum clean all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dnf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dnf clean all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rvm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rvm cleanup all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gem cleanup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cpan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rm -rf ~/.cpan/{build,sources}/*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rm -rf ~/.cache/pip/*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apt-get</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">apt-get clean</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_clearing_package_cache_and_squashing">Clearing package cache and squashing</h5>
<div class="paragraph">
<p>If you squash your images after manual building or as part of an automated build process, it is not necessary to clean cache in every single relevant instruction/layer as the intermediate layers affect the previous ones in this case.</p>
</div>
<div class="paragraph">
<p>Simple example Dockerfiles below would both produce the same image if they were squashed:</p>
</div>
<div class="listingblock">
<div class="title">Cache cleanup in a separate instruction</div>
<div class="content">
<pre class="highlight"><code>FROM fedora
RUN dnf install -y mariadb
RUN dnf install -y wordpress
RUN dnf clean all</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Cache cleanup chained with the install command</div>
<div class="content">
<pre class="highlight"><code>FROM fedora
RUN dnf install -y mariadb wordpress &amp;&amp; dnf clean all</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, without squashing, the first image would contain additional files and would be bigger than the second one.</p>
</div>
<div class="listingblock">
<div class="title">Size comparison</div>
<div class="content">
<pre class="highlight"><code># docker images
REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE
example             separate            54870d73715f        21 seconds ago       537.7 MB
example             chained             6a6156547888        About a minute ago   377.9 MB</code></pre>
</div>
</div>
<div class="paragraph">
<p>Therefore, it is a good practice to write Dockerfiles in a way so that others can use it as a valid reference and are always able to reproduce the build. To ensure this, you should <strong>clean cache in every layer</strong> where applicable. In general, you should always aim to create images that are small and concise regardless of whether the final image is squashed or not.</p>
</div>
<div class="paragraph">
<p>Read more about suqashing and its repercussions in the <a href="#squashing">Squashing layers</a> section.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_remove_unnecessary_packages">5.3.2. Remove unnecessary packages</h4>
<div class="paragraph">
<p>In some cases, your image can end up with several packages that are not necessary to support the runtime of your
application.  A good example is when you actually build your application from source during the build of the image
itself.  Typically, when you build an application, you will pull in development (-devel) packages as well as
toolchain based packages like make and gcc.  Once your application is built, you may no longer need these packages
for runtime depending on how your application links to libraries.</p>
</div>
<div class="paragraph">
<p>Depending on your application and which packages you added to your image, you might need to iteratively attempt to
remove packages checking to make sure your application still works.  One suggestion would be to remove big parts of the
toolchain.  And then use your package manager&#8217;s command to clean up unused packages.  In the case of <em>yum</em>, you can
remove unneeded packages like so:</p>
</div>
<div class="listingblock">
<div class="title">Removing unnecessary packages with yum</div>
<div class="content">
<pre class="highlight"><code># yum autoremove</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should run this command in an interactive shell (docker run -it --rm &lt;image&gt; /bin/bash) initially so you can
get a feel for which packages will be removed.  One upside to doing so is that you can then test run your application
from the interactive shell to make sure it still works.</p>
</div>
</div>
<div class="sect3">
<h4 id="_installing_documentation">5.3.3. Installing Documentation</h4>
<div class="paragraph">
<p>It is generally considered good practice to keep your images as small as possible.  Above we have discussed that
package manager caches should be cleared to reduce image sizes.  You can also reduce image size by limiting the
documentation being installed.  If you package manager supports such a thing and then you have no expectations
for users to use a shell to interact with your image, this might significantly reduce the size of your image.</p>
</div>
<div class="paragraph">
<p>Yum has an optional flag to not install documentation.  The following example shows how to set the flag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RUN yum install -y mysql --setopt=tsflags=nodocs</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <strong>nodocs</strong> flag is used in some base images, for example CentOS and Fedora, and this setting gets
inherited by the child layers. This can cause problems in case you want to include documentation deliberately in your
 layered image.</p>
</div>
<div class="paragraph">
<p>In this case, if you wish to have the documentation installed for <strong>packages from your single layer only</strong>, you have to
empty the <strong>tsflags</strong> option as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RUN yum -y install docker --setopt=tsflags=''</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to have the documentation installed for <strong>packages from your single layer and the parent layers</strong>, you need
 to reinstall the packages with the empty <strong>tsflags</strong> option as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RUN yum -y reinstall "*" --setopt-tsflags='' &amp;&amp; yum install docker --setopt-tsflags=''</pre>
</div>
</div>
<div class="paragraph">
<p>In case you need to have documentation included for <strong>every package from every single parent or child layer</strong>,
the <strong>/etc/yum.conf</strong> file needs to be edited as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RUN [ -e /etc/yum.conf ] &amp;&amp; sed -i '/tsflags=nodocs/d' /etc/yum.conf || true
RUN yum -y reinstall "*"
RUN yum -y install &lt;package&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="squashing">5.3.4. Squashing layers</h4>
<div class="paragraph">
<p>Each instruction you create in your Dockerfile results in a new image layer being created. Each layer brings additional
data that are not always part of the resulting image. For example, if you add a file in one layer, but remove it in
another layer later, the final image&#8217;s size will include the added file size in a form of a special "whiteout" file
although you removed it. In addition, every layer contains separate metadata that add up to the overall image size as
well. So what are the benefits of squashing?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Performance</strong> - Since all layers are copy-on-write file systems, it will take longer to build the final container
from many layers. Squashing helps reduce the build time.</p>
</li>
<li>
<p><strong>Image size</strong> - Similarly, since an image is actually a collection of other images, the final image size is the sum of the sizes of component images. With squashing, you can prevent these unwanted size additions.</p>
</li>
<li>
<p><strong>Organization</strong> - Squashing also helps you control the structure of an image, reduce the number of layers and organize images logically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, Docker does not yet support squashing natively, so you will have to work around it by using alternative
approaches, some of which are listed below.</p>
</div>
<div class="sect4">
<h5 id="_docker_save">docker save</h5>
<div class="paragraph">
<p>You can use <em>docker save</em> to squash all the layers of your image into a single layer.  The <em>save</em> command
was intended for this use, so this happens to be a side effect of the process. This approach,
however, is not very practical for sharing as the user will be able to only download
the whole content and cannot take advantage the caching. Note that the base image layer will be included
as well and might be several hundreds of megabytes in size.</p>
</div>
</div>
<div class="sect4">
<h5 id="squash_tools">Custom Tools</h5>
<div class="paragraph">
<p>You will surely find a lot of utilities on the internet that facilitate layer squashing.
We recommend taking advantage of Marek Goldmann&#8217;s <a href="https://github.com/goldmann/docker-squash">docker-squash</a>, which
automates layer squashing and which is maintained and has been tested by the community.</p>
</div>
</div>
<div class="sect4">
<h5 id="_repercussions_of_squashing">Repercussions of squashing</h5>
<div class="ulist">
<ul>
<li>
<p>When you squash an image, you will lose the history together with the metadata accompanying the layers.</p>
</li>
<li>
<p>Without the metadata, users building an image from a layered image that has been squashed are losing the idea that it happened.</p>
</li>
<li>
<p>Similarly, if you decide to include the parent layer from which your image is built into the resulting squashed image, you ultimately prevent others from seeing that this happened.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Look at the mongodb example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># docker images openshift/mongodb-24-centos7
REPOSITORY                               TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
docker.io/openshift/mongodb-24-centos7   latest              d7c0c18b0ae4        16 hours ago        593.3 MB</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without squashing, you can see complete history and how each of the layers occupies space.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># docker history docker.io/openshift/mongodb-24-centos7:latest
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
d7c0c18b0ae4        About an hour ago   /bin/sh -c #(nop) CMD ["run-mongod"]            0 B
63e2ba112add        About an hour ago   /bin/sh -c #(nop) ENTRYPOINT &amp;{["container-en   0 B
ca996db9c281        About an hour ago   /bin/sh -c #(nop) USER [184]                    0 B
8593b9473058        About an hour ago   /bin/sh -c #(nop) VOLUME [/var/lib/mongodb/da   0 B
5eca88b7872d        About an hour ago   /bin/sh -c touch /etc/mongod.conf &amp;&amp; chown mo   0 B
9439db8f40ad        About an hour ago   /bin/sh -c #(nop) ADD dir:f38635e83f0e6943cd3   17.29 kB
12c60945cbac        About an hour ago   /bin/sh -c #(nop) ENV BASH_ENV=/usr/share/con   0 B
e6073f9a949f        About an hour ago   /bin/sh -c #(nop) ENV CONTAINER_SCRIPTS_PATH=   0 B
619bf2ae5ed8        About an hour ago   /bin/sh -c yum install -y centos-release-scl    342.6 MB
ab5deeccfe21        About an hour ago   /bin/sh -c #(nop) EXPOSE 27017/tcp              0 B
584ded9dcbca        About an hour ago   /bin/sh -c #(nop) LABEL io.k8s.description=Mo   0 B
17e3bcd28e07        About an hour ago   /bin/sh -c #(nop) ENV MONGODB_VERSION=2.6 HOM   0 B
807a1e9c5a7b        16 hours ago        /bin/sh -c #(nop) MAINTAINER SoftwareCollecti   0 B
28e524afdd05        10 days ago         /bin/sh -c #(nop) CMD ["/bin/bash"]             0 B
044c0f15c4d9        10 days ago         /bin/sh -c #(nop) LABEL name=CentOS Base Imag   0 B
2ebc6e0c744d        10 days ago         /bin/sh -c #(nop) ADD file:6dd89087d4d418ca0c   196.7 MB
fa5be2806d4c        7 months ago        /bin/sh -c #(nop) MAINTAINER The CentOS Proje   0 B</code></pre>
</div>
</div>
<div class="paragraph">
<p>See how the history and size changes after squashing all layers in a single one (using the script <a href="#squash_tools">above</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># docker history docker.io/openshift/mongodb-24-centos7:squashed
IMAGE               CREATED             CREATED BY          SIZE                COMMENT
90036ed9bd1d        58 minutes ago                          522.1 MB</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>One of the biggest benefits of using layers is the posibility to reuse them. Images are usually squashed into a single big layer, which does not allow for pushing partial updates in individual layers; instead, the whole image needs to be pushed into the registry upon a change. The same applies to pulling the image from the registry.</p>
</li>
<li>
<p>Some users might rely on suqashing when it comes to sensitive data. Be cautios because squashing is not meant to "hide" content. Even though squashing removes intermediate layers from the final image, information about secrets used in those layers will stay in the build cache.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chaining_commands">5.3.5. Chaining Commands</h4>
<div class="paragraph">
<p>In general, having fewer layers improves readability. Commands that are chained together become a part of the
same layer. To reduce the number of layers, chain commands together. Find a balance, though, between a large
number of layers (and a great many commands), and a small number of layers (and obscurity caused by brevity).</p>
</div>
<div class="paragraph">
<p>A new layer is created for every new instruction defined. This does not necessarily mean that one instruction
should be associated with only one command or definition.</p>
</div>
<div class="paragraph">
<p>Ensure transparency and provide a good overview of the content of each layer by grouping related operations
together so that they together constitute a single layer. Consider this snippet:</p>
</div>
<div class="listingblock">
<div class="title">Chained Dockerfile instruction</div>
<div class="content">
<pre class="highlight"><code>RUN yum install -y --setopt=tsflags=nodocs \
    httpd vim &amp;&amp; \
    systemctl enable httpd &amp;&amp;
    yum clean all</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each command that is related to the installation and configuration of <code>httpd</code> is grouped together
as a part of the same layer. This meaningful grouping of operations keeps the number of layers low
while keeping the easy legibility of the layers high.</p>
</div>
<div class="sect4">
<h5 id="_using_semi_colons_vs_double_ampersands">Using semi-colons (;) vs double ampersands (&amp;&amp;)</h5>
<div class="paragraph">
<p>In the RUN instruction of Dockerfiles, it is common to string together multiple commands for efficiency.  Stringing
commands together in the RUN instructions are typically done with ampersands or semi-colons. However, you should
consider the implications of each and their usage.  The following examples illustrate the difference.</p>
</div>
<div class="listingblock">
<div class="title">Using semi-colons as instruction conjunctions</div>
<div class="content">
<pre class="highlight"><code>RUN do_1; do_2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This sort of conjunction will be evaluated into do_1 and then do_2.  However, using the double
ampersands results in a different evaluation.</p>
</div>
<div class="listingblock">
<div class="title">Using double ampersands as conjunctions</div>
<div class="content">
<pre class="highlight"><code>RUN do_1 &amp;&amp; do_2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ampersands change the resulting evaluation into do_1 and then do_2 <em>only if do_1 was successful</em>.</p>
</div>
<div class="paragraph">
<p>The use of the double ampersands as conjunctions is probably a better practice in Dockerfiles because
it ensures that your instructions are completed or the build will fail.  If the build were to continue
and you had not closely monitored the build (or its results), then the image may not be exactly
as you desired.  This is particularly true with automated build systems where you will want any
failure to result in the failure of the build itself.</p>
</div>
<div class="paragraph">
<p>There are certainly use cases where semi-colons might be preferred and possibly should be used.
Nevertheless, the possible result of an incomplete image should be carefully considered.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_locales">5.3.6. Locales</h4>

</div>
</div>
<div class="sect2">
<h3 id="_labels">5.4. Labels</h3>
<div class="paragraph">
<p>Labels in Dockerfiles serve as a useful way to organize and document metadata used to describe an image.  Some labels are only descriptive
by nature, like  <em>Name</em> whereas others, like <em>RUN</em> can be used to describe action-oriented metadata.  Labels are often leveraged by applications, like
<a href="https://github.com/projectatomic/atomic">atomic</a>, to help the image run as the author intended.  They can also for purely descriptive
purposed and can viewed manually with the <em>docker inspect &lt;image_name&gt;</em> command.</p>
</div>
<div class="paragraph">
<p>The authoritative source for labels
is the  <a href="https://github.com/projectatomic/ContainerApplicationGenericLabels">Container Application Generic Labels</a> git repository.</p>
</div>
<div class="sect3">
<h4 id="_when_are_they_required">5.4.1. When are they required?</h4>
<div class="paragraph">
<p>Labels are never required per-se unless your build system or lifecycle management process requires them.
However, the use of labels is highly recommended for a number of reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>As mentioned above, many container related tools can use the label metadata in meaningful ways often
contributing to a better user experience.</p>
</li>
<li>
<p>The label metadata is always visible when inspecting the image.  Therein, users can at least see the
metadata even if their tooling does not make specific use of it.  For example, the RUN label basically
documents how you, as the author of the Dockerfile, expect this image to be run.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_descriptive_labels">5.4.2. Descriptive labels</h4>
<div class="paragraph">
<p>The descriptive labels usually are alpha-numeric strings used to describe some aspect of the image itself.  Examples, might be
the version and release labels which could theoretically just be integer based.
The following table describes labels that are meant to be purely descriptive in nature.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Descriptive labels</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changelog-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of a page containing release notes for the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"rhel7/rsyslog"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"7.2"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">release</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Release number of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"12"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">architecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture for the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"x86_64"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">build-date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time image was built as <a href="https://tools.ietf.org/html/rfc3339">RFC 3339</a> date-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"2015-12-03T10:00:44.038585Z"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vendor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"Red Hat, Inc."</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL with more information about the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Longer description of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vcs-type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of version control used by the container source. Generally one of git, hg, svn, bzr, cvs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"git"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vcs-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the version control repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vcs-ref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A 'reference' within the version control repository; e.g. a git commit, or a subversion branch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"364a&#8230;&#8203;92a"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authoritative-source-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authoritative location in which the image is published</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">distribution-scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intended scope of distribution for image. Possible values are private, authoritive-source-only, restricted, or public</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>private</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_action_oriented_labels">5.4.3. Action-oriented labels</h4>
<div id="label_action" class="paragraph">
<p>Most action-oriented labels will be a used in the context of a docker command in order for the container to behave in a desired
way.  The following table describes the defined action-oriented labels.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Action-oriented labels</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to run the image with debugging turned on</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tbd</em></p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">help</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to run the help command of the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tbd</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">run</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to run the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"docker run -d --privileged --name NAME --net=host --pid=host -v /etc/pki/rsyslog:/etc/pki/rsyslog -v /etc/rsyslog.conf:/etc/rsyslog.conf -v /etc/sysconfig/rsyslog:/etc/sysconfig/rsyslog -v /etc/rsyslog.d:/etc/rsyslog.d -v /var/log:/var/log -v /var/lib/rsyslog:/var/lib/rsyslog -v /run:/run -v /etc/machine-id:/etc/machine-id -v /etc/localtime:/etc/localtime -e IMAGE=IMAGE -e NAME=NAME --restart=always IMAGE /bin/rsyslog.sh"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">uninstall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to uninstall the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"docker run --rm --privileged -v /:/host -e HOST=/host -e IMAGE=IMAGE -e NAME=NAME IMAGE /bin/uninstall.sh"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">install</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to install the image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>"docker run --rm --privileged -v /:/host -e HOST=/host -e IMAGE=IMAGE -e NAME=NAME IMAGE /bin/install.sh"</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to execute before stopping container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tbd</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_recommended_labels_for_your_project">5.4.4. Recommended labels for your project</h4>
<div class="paragraph">
<p>Labels are critical to properly identifying your image and influencing how it runs.  For the purposes of
identification, we recommend that you at least use the following labels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name</p>
</li>
<li>
<p>version</p>
</li>
<li>
<p>release</p>
</li>
<li>
<p>architecture</p>
</li>
<li>
<p>vendor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And for actionable labels, we recommend you use at least the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RUN</p>
</li>
<li>
<p>INSTALL</p>
</li>
<li>
<p>UNINSTALL</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These three are the most critical for ensuring that users run the image in the manner you wish.  Furthermore,
tools developed to read and act upon this meta data will work correctly.</p>
</div>
<div class="paragraph">
<p>In the case that you provide a help file that does not follow the standard of a man page, then the HELP label would also
be prudent.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_template">5.5. Template</h3>

</div>
<div class="sect2">
<h3 id="_starting_your_application">5.6. Starting your application</h3>
<div class="paragraph">
<p>Generally the CMD instruction in the Dockerfile is used by docker to start your application
when the image or container is started.  In the planning section, we provided some reasoning
for choosing how to  <strong><em><a href="#planning_starting_application">start your application</a></em></strong>.  The following
subsections will show how to implement each choice in your Dockerfile.</p>
</div>
<div class="sect3">
<h4 id="_calling_the_binary_directly_2">5.6.1. Calling the binary directly</h4>
<div class="paragraph">
<p>Being the simplest of the choices, you simply need to call the binary using the CMD instruction or
define an ENTRYPOINT in your Dockerfile.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>CMD ["/usr/bin/some_binary"]</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_using_the_cmd_instruction">Using the CMD Instruction</h5>
<div class="paragraph">
<p>With CMD, you can identify the default command to run from the image, along with options you want to pass to it.
If there is no ENTRYPOINT in the Dockerfile, the value of CMD is the command run by default when you start the
container image. If there is an ENTRYPOINT in the Dockerfile, the ENTRYPOINT value is run as the command instead,
with the value of CMD used as options to the ENTRYPOINT command.</p>
</div>
<div class="paragraph">
<p>The CMD instruction can be overridden when you run the image. So, notice the different results from running
mycmd in two different ways:</p>
</div>
<div class="paragraph">
<p>Any time you add an argument to the end of a docker run command, the CMD instruction inside the container is ignored.
So the second example opens a bash shell instead of running the cat command. If you want to assign a command that
is not overridden by options at the end of a docker run command, use the ENTRYPOINT instruction.</p>
</div>
</div>
<div class="sect4">
<h5 id="_using_the_entrypoint_instruction">Using the ENTRYPOINT Instruction</h5>
<div class="paragraph">
<p>Like CMD, the ENTRYPOINT instruction lets you define the command executed when you run the container image but it
cannot be overridden by arguments you put at the end of a docker run line. If your Dockerfile includes an
ENTRYPOINT instruction and there is also a CMD instruction, any arguments on the CMD instruction line are passed to
the command defined in the ENTRYPOINT line.</p>
</div>
<div class="paragraph">
<p>This is the distinct advantage of the ENTRYPOINT instruction over the CMD instruction because the command being run
is not overridden but it can be subsidized.  Suppose you have an ENTRYPOINT instruction that displays two files.
You could easily add an additional file to be displayed by adding it to the docker run command.</p>
</div>
<div class="paragraph">
<p>You can override the ENTRYPOINT command by defining a new entrypoint with the --entrypoint="" option on the docker
command line.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating_using_a_script">5.6.2. Using a script</h4>
<div class="paragraph">
<p>Using a script to start an application is very similar to calling the binary directly. Again, you
use the CMD instruction but instead of pointing at the binary you point at your script that was
injected into the image.  The <em>registry.access.redhat.com/rhel7/rsyslog</em> image uses a script
to start the rsyslogd application. Lets look at the two relevant instructions in its Dockerfile
that make this happen.</p>
</div>
<div class="paragraph">
<p>The following instruction injects our script (rsyslog.sh) into the image in the <em>bin</em> dir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>ADD rsyslog.sh /bin/rsyslog.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>The contents of the script are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>#!/bin/sh
# Wrapper to start rsyslog.d with appropriate sysconfig options

echo $$ &gt; /var/run/syslogd.pid

source /etc/sysconfig/rsyslog
exec /usr/sbin/rsyslogd -n $SYSLOGD_OPTIONS</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how the script does in fact handle environment variables by sourcing the <em>/etc/sysconfig/rsyslog</em>
file. And the CMD instruction simply calls the script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>CMD [ "/bin/rsyslog.sh" ]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating_using_systemd">5.6.3. Using systemd "inside the container"</h4>
<div class="paragraph">
<p>Extending our example from <a href="#creating_using_a_script">starting an application with a script</a>, the rsyslog
image was started with a script.  We could easily use systemd to start the application.  To use systemd
to start a service that has a unit file, we need to tell systemd to enable the service and then let the
init process handle the rest. So instead of the ADD instruction used earlier, we would use a RUN
instruction to enable the service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>RUN systemctl enable rsyslog</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then we need to change the CMD instruction to call <em>/usr/sbin/init</em> to let systemd take over.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>RUN /usr/sbin/init</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_systemd_to_control_containers">5.6.4. Using systemd to control containers</h4>
<div class="paragraph">
<p>The control mechanism for most docker functions is done via the docker commands or something like
the atomic application which simplifies the management of containers and images for users.  But in
a non-development environment, you may wish to treat your containers more like traditional services
or applications.  For example, you may wish to have your containers start in a specific order on
boot-up.  Or perhaps you wish to be able to restart (or recycle) a container because you have changed
its configuration file.</p>
</div>
<div class="paragraph">
<p>There are several approaches to these sorts of function.  You can make sure a specific container
always starts on boot-up using the --restart switch with the docker command line when you initially
run the image.  There are also orchestration platforms like Kubernetes that will allow you to determine the
start up order of containers even when they are distributed.  But in the case where all the containers
reside on a single node, systemd might just be exactly the solution.  Like with traditional services,
systemd is capable of making sure services both start and in the order they are specified.  Moreover,
any issues with startup or the container are logged like any other system service.</p>
</div>
<div class="paragraph">
<p>When using systemd to manage your containers, you are really using systemd to call docker commands (and
subsequently the docker daemon) to perform the actions.  Therefore, once you commit to using systemd
to control a container, you will need to make sure that all start, stop, and restart actions are
conducted with systemd.  Failure to do so essentially decouples the docker daemon and systemd causing
systemd to be out of sync.</p>
</div>
<div class="paragraph">
<p>In review, systemd is a good solution for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>host system services such as agents and long-running services</p>
</li>
<li>
<p>logging via journald</p>
</li>
<li>
<p>service dependant management</p>
</li>
<li>
<p>traditional service management vis <em>systemctl</em></p>
</li>
<li>
<p>multi-container applications with dependencies on the same node</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The configuration file below is a sample service file that can be used and edited to control your image or
container.  In the [Unit] section, you can declare other services needed by your image including the cases where
those services are also images.</p>
</div>
<div class="listingblock">
<div class="title">Sample template for a systemd service file</div>
<div class="content">
<pre class="highlight"><code>[Unit]
After=docker.service
Requires=docker.service
PartOf=docker.service
After=[cite another service]
Wants=[cite another service]

[Service]
EnvironmentFile=[path to configuration file]
ExecStartPre=-[command to execute prior to starting]
ExecStart=[command to execute for start]
ExecStartPost=/usr/bin/sleep 10
ExecStop=[command to execute for stop]
Restart=always

[Install]
WantedBy=docker.service</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the [Service] section, you can also declare the actual commands that should be run prior to start, in the
case of start, and in the case of stop.  These commands can either be straight base commands or docker run (or stop)
commands as well.  Finally, if you are using a well made image that contains labels like STOP or RUN, you
could also use the atomic command.  For example, a start command could simply be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>atomic run &lt;image_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works because the actual docker command to run that image is part of the image&#8217;s metadata and atomic is
capable of extracting it.</p>
</div>
<div class="paragraph">
<p>The [Service] section also has an option for EnvironmentFile.  In a traditional, non-containerized systemd service,
this configuration file resides in <em>/etc/sysconfig/&lt;service_name&gt;</em>.  In the case of a containerized application,
these configuration files are not always configurable and therefore do not reside on the host&#8217;s filesystem.  And
in the case of where they are configurable, the EnvironmentFile is usually more important to how the service
application is started.  If you are <a href="#planning_use_systemd">starting the application</a> within an image
with systemd, then systemd will use <em>/etc/sysconfig/&lt;service_name&gt;</em> within the image itself.</p>
</div>
<div class="paragraph">
<p>For more information on writing unit files see <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sect-Managing_Services_with_systemd-Unit_Files.html">Managing Systemd unit files</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_help_file">5.7. Creating a Help file</h3>
<div class="paragraph">
<p>You can now provide a man-like help file with your images that allow for users to have a deeper understanding of your
image.  This function now allows you to provide a:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>more verbose description of the what the image is and does</p>
</li>
<li>
<p>understanding of how the image should be run</p>
</li>
<li>
<p>description of the security implications inherent in running the image</p>
</li>
<li>
<p>requirement if the image needs to be installed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The atomic application will allow you to display this help file trivially like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-none" data-lang="none"># atomic help &lt;image or container name&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_location">5.7.1. Location</h4>
<div class="paragraph">
<p>The help file must be located in the images as /help.1 and in 'man' format.</p>
</div>
</div>
<div class="sect3">
<h4 id="_required_headings">5.7.2. Required headings</h4>
<div class="paragraph">
<p>The following headings are strongly encouraged in the help file for an image.</p>
</div>
<div class="sect4">
<h5 id="_description">DESCRIPTION</h5>
<div class="paragraph">
<p>Describe in greater detail the role or purpose of the image.  This can include more specifics about the
packages that make up the image.  You can also describe whether image is meant to be interactive
or more service oriented.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usage">5.7.3. USAGE</h4>
<div class="paragraph">
<p>Describe how to run the image as a container and what factors might influence the behaviour of the image
itself.</p>
</div>
</div>
<div class="sect3">
<h4 id="_history">5.7.4. HISTORY</h4>
<div class="paragraph">
<p>Similar to a Changelog of sorts which can be as detailed as the maintainer desires.</p>
</div>
</div>
<div class="sect3">
<h4 id="_optional_headings">5.7.5. Optional headings</h4>
<div class="paragraph">
<p>Use the following sections in your help file when applicable.</p>
</div>
<div class="sect4">
<h5 id="_labels_2">Labels</h5>
<div class="paragraph">
<p>Describe the labels you use and why when applicable.  Specifically focus any action-oriented labels like RUN, INSTALL, and
UNINSTALL.</p>
</div>
</div>
<div class="sect4">
<h5 id="_security_implications">Security Implications</h5>
<div class="paragraph">
<p>If you image uses any privileges that you want to make the user aware of, be sure to document which ones are used and optionally
why.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_template">5.7.6. Sample template</h4>
<div class="paragraph">
<p>We recommend writing the help file in the <a href="https://help.github.com/articles/markdown-basics/">markdown</a> language and then
converting it to the man format.  This is handy because github can natively display markdown so the help file can be used
in multiple ways.</p>
</div>
<div class="listingblock">
<div class="title">Sample help template in markdown format</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">% IMAGE_NAME(1)
% MAINTAINER
% DATE


# DESCRIPTION
Describe in greater detail the role or purpose of the image.  This can include more specifics about the
packages that make up the image.  You can also describe whether image is meant to be interactive
or more service oriented.

# USAGE
Describe how to run the image as a container and what factors might influence the behaviour of the image
itself. For example:

To set up the host system for use by the XYZ container, run:

  atomic install XYZimage

To run the XYZ container (after it is installed), run:

  atomic run XYZimage

To remove the XYZ container (not the image) from your system, run:

  atomic uninstall XYZimage

To upgrade the XYZ container from your system, run:

  atomic upgrade XYZimage

# LABELS
Describe LABEL settings (from the Dockerfile that created the image) that contains pertinent information.
For containers run by atomic, that could include INSTALL, RUN, UNINSTALL, and UPDATE LABELS. Others could
include BZComponent, Name, Version, Release, and Architecture.

# SECURITY IMPLICATIONS
If you expose ports or run with privileges, it would be warranted to briefly note those and provide
an explanation if needed.

# HISTORY
Similar to a Changelog of sorts which can be as detailed as the maintainer wishes.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_help_file_for_the_rsyslog_container">5.7.7. Example help file for the rsyslog container</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">% RSYSLOG (1) Container Image Pages
% Stephen Tweedie
% January 27, 2016

# NAME
rsyslog \- rsyslog container image

# DESCRIPTION

The rsyslog image provides a containerized packaging of the rsyslogd daemon. The rsyslogd daemon is a
utility that supports system message logging. With the rsyslog container installed and running, you
can configure the rsyslogd service directly on the host computer as you would if the daemon were
not containerized.

You can find more information on the rsyslog project from the project Web site (http://www.rsyslog.com/doc).

The rsyslog image is designed to be run by the atomic command with one of these options:

`install`

Sets up the container to access directories and files from the host system to use for rsyslogd configuration,
logging, log rotation, and credentials.

`run`

Starts the installed container with selected privileges to the host and with logging-related files and
directories bind mounted inside the container. If the container stops, it is set to always restart.

`uninstall`

Removes the container from the system. This removes the syslog logrotate file, leave all other files
and directories associated with rsyslogd on the host system.

Because privileges are opened to the host system, the running rsyslog container can gather log messages
from the host and save them to the filesystem on the host.

The container itself consists of:
    - rhel7/rhel base image
    - rsyslog RPM package

Files added to the container during docker build include: /bin/install.sh, /bin/rsyslog.sh, and /bin/uninstall.sh.

# "USAGE"
To use the rsyslog container, you can run the atomic command with install, run, or uninstall options:

To set up the host system for use by the rsyslog container, run:

  atomic install rhel7/rsyslog

To run the rsyslog container (after it is installed), run:

  atomic run rhel7/rsyslog

To remove the rsyslog container (not the image) from your system, run:

  atomic uninstall rhel7/rsyslog

# LABELS
The rsyslog container includes the following LABEL settings:

That atomic command runs the docker command set in this label:

`INSTALL=`

  LABEL INSTALL="docker run --rm --privileged -v /:/host \
  -e HOST=/host -e IMAGE=IMAGE -e NAME=NAME \
  IMAGE /bin/install.sh"

  The contents of the INSTALL label tells an `atomic install rhel7/rsyslog` command to remove the container
  after it exits (--rm), run with root privileges open to the host, mount the root directory (/) from the hos on
  the /host directory within the container, set the location of the host file system to /host, set the name of
  the image and run the install.sh script.

`RUN=`

  LABEL RUN="docker run -d --privileged --name NAME \
  --net=host --pid=host \
  -v /etc/pki/rsyslog:/etc/pki/rsyslog \
  -v /etc/rsyslog.conf:/etc/rsyslog.conf \
  -v /etc/sysconfig/rsyslog:/etc/sysconfig/rsyslog \
  -v /etc/rsyslog.d:/etc/rsyslog.d \
  -v /var/log:/var/log \
  -v /var/lib/rsyslog:/var/lib/rsyslog \
  -v /run:/run \
  -v /etc/machine-id:/etc/machine-id:ro \
  -v /etc/localtime:/etc/localtime:ro \
  -e IMAGE=IMAGE -e NAME=NAME \
  --restart=always IMAGE /bin/rsyslog.sh"

  The contents of the RUN label tells an `atomic run rhel7/rsyslog` command to open various privileges to the host
  (described later), mount a variety of host files and directories into the container, set the name of the container,
  set the container to restart automatically if it stops, and run the rsyslog.sh script.


`UNINSTALL=`

  LABEL UNINSTALL="docker run --rm --privileged -v /:/host \
  -e HOST=/host -e IMAGE=IMAGE -e NAME=NAME \
  IMAGE /bin/uninstall.sh"

  The contents of the UNINSTALL label tells an `atomic uninstall rhel7/rsyslog` command to uninstall the rsyslog
  container. Stopping the container in this way removes the container, but not the rsyslog image from your system.
  Also, uninstalling leaves all rsyslog configuration files and log files intact on the host (only removing the
  syslog logrotate file).

`BZComponent=`

The bugzilla component for this container. For example, "BZComponent="rsyslog-docker".

`Name=`

The registry location and name of the image. For example, "Name="rhel7/rsyslog":

`Version=`

The Red Hat Enterprise Linux version from which the container was built. For example, "Version="7.2".

`Release=`

The specific release number of the container Release="12.1.a":

`Architecture=`

The machine architecture associated with the Red Hat Enterprise Linux release. For example, "Architecture="x86_64"

When the atomic command runs the rsyslog container, it reads the command line associated with the selected option
from a LABEL set within the Docker container itself. It then runs that command. The following sections detail
each option and associated LABEL:

.SH "SECURITY IMPLICATIONS"
The rsyslog container is what is referred to as a super-privileged container. It is designed to have almost complete
access to the host system as root user. The following docker command options open selected privileges to the host:

`-d`

Runs continuously as a daemon process in the background

`--privileged`

Turns off security separation, so a process running as root in the container would have the same access to the
host as it would if it were run directly on the host.

`--net=host`

Allows processes run inside the container to directly access host network interfaces

`--pid=host`

Allows processes run inside the container to see and work with all processes in the host process table

`--restart=always`

If the container should fail or otherwise stop, it would be restarted

.SH "HISTORY"
Similar to a Changelog of sorts which can be as detailed as the maintainer wishes.

.SH "AUTHORS"

Stephen Tweedie</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_converting_markdown_to_man_format">5.7.8. Converting markdown to man format</h4>
<div class="paragraph">
<p>There are several methods for converting markdown format to man format.  One prevalent method is to use go-md2man supplied
by the golang-github-cpuguy83-go-md2man package.  To convert from markdown to man using this utility, you do as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-none" data-lang="none"># go-md2man -in path_to_man_file -out output_file</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_changelog">5.8. Creating a Changelog</h3>

</div>
<div class="sect2">
<h3 id="_verifying_dockerfile_linter">5.9. Verifying Dockerfile (linter)</h3>

</div>
<div class="sect2">
<h3 id="_dockerfiles_2">5.10. Dockerfiles</h3>
<div class="paragraph">
<p>The Dockerfiles for many of the public images are hosted in git repositories where users can view
them.  This also allows users to customize them as well.</p>
</div>
<div class="paragraph">
<p>It is also good practice to include the Dockerfile in the image itself.  Some distributions have begun to
include an image&#8217;s Dockerfile in the directory <em>/root/buildinfo</em>.  Consider following the same
approach to make sure your Dockerfiles can be easily found.</p>
</div>
<div class="paragraph">
<p>OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD - OLD -</p>
</div>
</div>
<div class="sect2">
<h3 id="_dockerfiles_3">5.11. Dockerfiles</h3>
<div class="sect3">
<h4 id="_location_2">5.11.1. Location</h4>
<div class="paragraph">
<p>Upstream Dockerfiles should be hosted in a public GIT repository, for example <a href="https://github.com">GitHub</a>. Ideally, the repository should be created under the organization relevant to a particular project. For example, <a href="http://www.softwarecollections.org">Software Collections</a> Dockerfiles are available under the GitHub <a href="https://github.com/sclorg">sclorg</a> organization.</p>
</div>
</div>
<div class="sect3">
<h4 id="_images">5.11.2. Images</h4>
<div class="paragraph">
<p>Upstream Docker images, such as CentOS and Fedora base images and layered images based on these, should be publicly available on <a href="https://registry.hub.docker.com/">Docker Hub</a>.</p>
</div>
<div class="paragraph">
<p>For details on using the Docker Hub registry, see <a href="https://docs.docker.com/userguide/dockerimages/">Docker User Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_content">5.11.3. Content</h4>
<div class="paragraph">
<p>Docker is a platform that enables applications to be quickly assembled from components. When creating Docker images, think about the added value you can provide potential users with. The intention should always be bringing some added functionality on top of plain package installation.</p>
</div>
<div class="paragraph">
<p>As an example, take this <a href="https://github.com/docker-library/wordpress/blob/618490d4bdff6c5774b84b717979bfe3d6ba8ad1/apache/Dockerfile">Word Press Dockerfile</a>. After running the image and linking it with a database image such as mysql, you will get a fully operational Word Press instance. In addition, you can also specify an external database.</p>
</div>
<div class="paragraph">
<p>This exactly is the purpose of using Docker images; instead of laborious installation and configuration of separate components, you simply pull an image from a registry, acquiring a set of tools ready to be used right out-of-the-box.</p>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_necessary_repositories">5.11.4. Enabling Necessary Repositories</h4>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect3">
<h4 id="_users">5.11.5. Users</h4>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect3">
<h4 id="_working_directory">5.11.6. Working Directory</h4>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect3">
<h4 id="_exposing_ports">5.11.7. Exposing Ports</h4>
<div class="paragraph">
<p>The EXPOSE instruction declares the ports on which a container will listen for incoming connections. You should specify ports your application commonly uses; for example, as seen in this <a href="https://github.com/openshift/mysql/blob/master/5.5/Dockerfile">mysql</a> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>EXPOSE 3306</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The TCP/IP port numbers below 1024 are special in that normal users are not allowed to bind on them.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Therefore, for example for Apache server, ports 8080 or 8433 (HTTP or HTTPS) should be exposed. Otherwise, only the root user will be allowed to run Apache server inside a container.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logging_2">5.11.8. Logging</h4>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_references">5.12. References</h3>
<div class="paragraph">
<p>Please see the following resources for more information on the Docker container technology and project-specific guidelines.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.docker.com/">Docker Documentation</a>&#8201;&#8212;&#8201;Detailed information about the Docker platform.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/openshift/openshift-docs/blob/master/creating_images/guidelines.adoc#openshift-specific-guidelines">OpenShift Guidelines</a>&#8201;&#8212;&#8201;Guidelines for creating images specific to the OpenShift project.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build">6. Building Applications</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simple_build">6.1. Simple build</h3>

</div>
<div class="sect2">
<h3 id="_use_a_build_service">6.2. Use a build service</h3>

</div>
<div class="sect2">
<h3 id="_container_development_kit">6.3. Container Development Kit</h3>
<div class="sect3">
<h4 id="_openshift_vm">6.3.1. OpenShift VM</h4>

</div>
<div class="sect3">
<h4 id="_kubernetes_vm">6.3.2. Kubernetes VM</h4>

</div>
<div class="sect3">
<h4 id="_eclipse_docker_vm">6.3.3. Eclipse/Docker VM</h4>
<div class="paragraph">
<p>OLD - OLD - OLD -OLD - OLD - OLD -OLD OLD OLD OLD - OLD - OLD -OLD - OLD - OLD -OLD OLD OLD
Building a single Docker image once is a simple matter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo docker build -t &lt;registry_URL&gt;/some/image .</pre>
</div>
</div>
<div class="paragraph">
<p>This will build the image which could then be pushed to a registry location. Done. However, this immutable image will need to be updated. And this image depends on other images which will be updated, which means this image will need to be rebuilt. If this image is part of a microservice application it is just one of several images that work together as integrated services that comprise an application. Do you really want a developer to build production services from their laptop?</p>
</div>
<div class="paragraph">
<p>Serious work with container technology should automate builds. While there are some unique challenges specific to container automation, generally following continuous integration and delivery best practices is recommended.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_environment">6.4. Build Environment</h3>
<div class="paragraph">
<p>A build environment should have the following characteristics</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is secure by limiting direct access to the build environment</p>
</li>
<li>
<p>limits access to configure and trigger builds</p>
</li>
<li>
<p>limits access to build sources</p>
</li>
<li>
<p>limits access to base images, those images referenced in the <code>FROM</code> line of a Dockerfile</p>
</li>
<li>
<p>provides access to build logs</p>
</li>
<li>
<p>provides some type of a pipeline or workflow, integrating with external services to trigger builds, report results, etc.</p>
</li>
<li>
<p>provides a way to test built images</p>
</li>
<li>
<p>provides a way to reproduce builds</p>
</li>
<li>
<p>provides a secure registry to store builds</p>
</li>
<li>
<p>provides a mechanism to promote tested builds</p>
</li>
<li>
<p>shares the same kernel as the target production runtime environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A build environment that meets these requirements is difficult to create from scratch. An automation engine like Jenkins is essential to managing a complex pipeline. While a virtual machine-based solution could be created, it is recommended that a dedicated, purpose-built platform such as OpenShift be used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Maintaining">7. Maintaining</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_lifecycle_2">7.1. Lifecycle</h3>
<div class="sect3">
<h4 id="_techniques_for_upgrades">7.1.1. techniques for upgrades</h4>
<div class="paragraph">
<p>It may be necessary from time to time to upgrade software within a container
How to deal with configuration / package updates -
* I think that with containers, it would probably be much more efficient to edit the Dockerfile and then rebuild.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the case of the latest issues (openssl and glibc vulnerability), the most efficient way is the be certain that the latest RHEL base image is available and rebuild.</p>
</li>
<li>
<p>In a case where it is a customer/ISV software component, the vendor/ISV would have to provide a patch/update.</p>
</li>
<li>
<p>In all RHEL containers, it would be advisable to put the following: FROM rhel7:latest -&#8594; This will ensure that the latest RHEL base image with all patches will always be available when the container is built.</p>
</li>
<li>
<p>When the Dockerfile is created, the following is always inserted: RUN yum -y update</p>
</li>
<li>
<p>Recommend that all software for RHEL based containers be installed with yum other than rpm - this way, an update of dependencies will be performed when an update of the base package is performed.</p>
</li>
<li>
<p>If the original github link was included in the Docker container, (perhaps as a LABEL) it could be used to make certain that the latest packages (RHEL or otherwise) are always available. Could then utilize docker inspect to parse the URL to make sure the container is up to date.</p>
</li>
<li>
<p>As for super priv containers, that is a TBD</p>
</li>
<li>
<p>Rollbacks would be a matter of either:</p>
</li>
<li>
<p>building a new container with the rollback in the Dockerfile</p>
</li>
<li>
<p>opening a shell of a running Docker container and performing a rollback(not the best option)</p>
</li>
<li>
<p>Configuration files and scripts should be preserved (for rollback) and then the new ones copied in</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_garbage_collection">7.2. Garbage Collection</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="Appendix">8. Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_atomic_application">8.1. Atomic application</h3>
<div class="paragraph">
<p>The <a href="https://github.com/projectatomic/atomic">atomic application</a> is meant to be a user-friendly way to
install, manage, and run container images using container. Unlike docker commands, it leverages the ability to
read and act upon LABELs defined in a Dockerfile.  By its nature, it helps authors of Dockerfiles to have
their images run as they intended without a significant amount of knowledge by the end users.  Atomic has several
subcommands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>diff</p>
</li>
<li>
<p><a href="help">help</a></p>
</li>
<li>
<p>host</p>
</li>
<li>
<p>info</p>
</li>
<li>
<p>install</p>
</li>
<li>
<p>images</p>
</li>
<li>
<p>migrate</p>
</li>
<li>
<p>mount</p>
</li>
<li>
<p>push</p>
</li>
<li>
<p>scan</p>
</li>
<li>
<p>stop</p>
</li>
<li>
<p>run</p>
</li>
<li>
<p>top</p>
</li>
<li>
<p>uninstall</p>
</li>
<li>
<p>unmount</p>
</li>
<li>
<p>update</p>
</li>
<li>
<p>version</p>
</li>
<li>
<p>verify</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Knowledge of these subcommands can make you a better author of Dockerfiles because you too can simplify end users'
interactions with your images.  Look to the following sections for more information on these relevant subcommands.</p>
</div>
<div class="sect3">
<h4 id="help">8.1.1. Displaying the help file</h4>
<div class="paragraph">
<p>You can display the help file for a container using the <strong><a href="https://github.com/projectatomic/atomic">atomic</a></strong> command.
For example, to display the help file for a container called <em>foobar</em>, you would run the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-none" data-lang="none"># atomic help foobar</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the default method of displaying the help file.  In this case, the help file is formatted like any typical
man page and is displayed (like man) with a pager.  The help file needs to be located in the / of the image filesystem
and called <strong>help.1</strong>.</p>
</div>
<div class="paragraph">
<p>If no help file is present and there is no HELP LABEL defined, atomic will simply tell you it could not find any
help associated with that container or image.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-05-16 09:59:42 EDT
</div>
</div>
</body>
</html>